<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
   "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8"/>
<head>
    <title>Vis Editor Lua API documentation</title>
    <link rel="stylesheet" href="ldoc_fixed.css" type="text/css" />
</head>
<body>

<div id="container">

<div id="product">
	<div id="product_logo"></div>
	<div id="product_name"><big><b></b></big></div>
	<div id="product_description"></div>
</div> <!-- id="product" -->


<div id="main">


<!-- Menu -->

<div id="navigation">
<br/>
<h1>Vis Editor</h1>



<h2>Contents</h2>
<ul>
<li><a href="#Class_Vis">Class Vis </a></li>
<li><a href="#Class_Ui">Class Ui </a></li>
<li><a href="#Class_Window">Class Window </a></li>
<li><a href="#Class_Selection">Class Selection </a></li>
<li><a href="#Class_File">Class File </a></li>
<li><a href="#Class_Range">Class Range </a></li>
<li><a href="#Layouts">Layouts </a></li>
<li><a href="#Modes">Modes </a></li>
<li><a href="#Key_Handling">Key Handling </a></li>
<li><a href="#Core_Events">Core Events </a></li>
<li><a href="#Events">Events </a></li>
</ul>


<h2>Modules</h2>
<ul class="nowrap">
  <li><strong>vis</strong></li>
</ul>

</div>

<div id="content">

<h1>Module <code>vis</code></h1>
<p>Lua Extension API for the [Vis Editor](https://github.com/martanne/vis).</p>
<p>
<p> *WARNING:* there is no stability guarantee at this time, the API might
 change without notice!
<p> This document might be out of date, run `make luadoc` to regenerate it.
</p>
    <h3>Info:</h3>
    <ul>
        <li><strong>Release</strong>: dd29e2f</li>
        <li><strong>License</strong>: ISC</li>
        <li><strong>Author</strong>: Marc André Tanner</li>
    </ul>


<h2><a href="#Class_Vis">Class Vis </a></h2>
<table class="function_list">
	<tr>
	<td class="name" nowrap><a href="#vis.VERSION">vis.VERSION</a></td>
	<td class="summary">Version information.</td>
	</tr>
	<tr>
	<td class="name" nowrap><a href="#vis.count">vis.count</a></td>
	<td class="summary">Current count.</td>
	</tr>
	<tr>
	<td class="name" nowrap><a href="#vis.events">vis.events</a></td>
	<td class="summary">Events.</td>
	</tr>
	<tr>
	<td class="name" nowrap><a href="#vis.input_queue">vis.input_queue</a></td>
	<td class="summary">Currently unconsumed keys in the input queue.</td>
	</tr>
	<tr>
	<td class="name" nowrap><a href="#vis.lexers">vis.lexers</a></td>
	<td class="summary">Scintillua lexer module.</td>
	</tr>
	<tr>
	<td class="name" nowrap><a href="#vis.lpeg">vis.lpeg</a></td>
	<td class="summary">LPeg lexer module.</td>
	</tr>
	<tr>
	<td class="name" nowrap><a href="#vis.mark">vis.mark</a></td>
	<td class="summary">Mark name in use.</td>
	</tr>
	<tr>
	<td class="name" nowrap><a href="#vis.mode">vis.mode</a></td>
	<td class="summary">Currently active mode.</td>
	</tr>
	<tr>
	<td class="name" nowrap><a href="#vis.modes">vis.modes</a></td>
	<td class="summary">Mode constants.</td>
	</tr>
	<tr>
	<td class="name" nowrap><a href="#vis.options">vis.options</a></td>
	<td class="summary">Vis Options</td>
	</tr>
	<tr>
	<td class="name" nowrap><a href="#vis.recording">vis.recording</a></td>
	<td class="summary">Whether a macro is being recorded.</td>
	</tr>
	<tr>
	<td class="name" nowrap><a href="#vis.register">vis.register</a></td>
	<td class="summary">Register name in use.</td>
	</tr>
	<tr>
	<td class="name" nowrap><a href="#vis.registers">vis.registers</a></td>
	<td class="summary">Registers.</td>
	</tr>
	<tr>
	<td class="name" nowrap><a href="#vis.ui">vis.ui</a></td>
	<td class="summary">User interface.</td>
	</tr>
	<tr>
	<td class="name" nowrap><a href="#vis.win">vis.win</a></td>
	<td class="summary">Currently active window.</td>
	</tr>
	<tr>
	<td class="name" nowrap><a href="#vis:action_register">vis:action_register(name, func[, help])</a></td>
	<td class="summary">Register a Lua function as key action.</td>
	</tr>
	<tr>
	<td class="name" nowrap><a href="#vis:close">vis:close(inputfd)</a></td>
	<td class="summary">Closes a stream returned by ???.</td>
	</tr>
	<tr>
	<td class="name" nowrap><a href="#vis:command">vis:command(command)</a></td>
	<td class="summary">Execute a `:`-command.</td>
	</tr>
	<tr>
	<td class="name" nowrap><a href="#vis:command_register">vis:command_register(name, command[, help])</a></td>
	<td class="summary">Register a custom `:`-command.</td>
	</tr>
	<tr>
	<td class="name" nowrap><a href="#vis:communicate">vis:communicate(name, command)</a></td>
	<td class="summary">Open new process and return its input stream (stdin).</td>
	</tr>
	<tr>
	<td class="name" nowrap><a href="#vis:complete_command">vis:complete_command(prefix)</a></td>
	<td class="summary">Let user pick a command matching the given prefix.</td>
	</tr>
	<tr>
	<td class="name" nowrap><a href="#vis:exit">vis:exit(code)</a></td>
	<td class="summary">Terminate editor process.</td>
	</tr>
	<tr>
	<td class="name" nowrap><a href="#vis:feedkeys">vis:feedkeys(keys)</a></td>
	<td class="summary">Push keys to input queue and interpret them.</td>
	</tr>
	<tr>
	<td class="name" nowrap><a href="#vis:files">vis:files()</a></td>
	<td class="summary">Create an iterator over all files.</td>
	</tr>
	<tr>
	<td class="name" nowrap><a href="#vis:info">vis:info(message)</a></td>
	<td class="summary">Display a short message.</td>
	</tr>
	<tr>
	<td class="name" nowrap><a href="#vis:insert">vis:insert(keys)</a></td>
	<td class="summary">Insert keys at all cursor positions of active window.</td>
	</tr>
	<tr>
	<td class="name" nowrap><a href="#vis:map">vis:map(mode, key, func[, help])</a></td>
	<td class="summary">Map a key to a Lua function.</td>
	</tr>
	<tr>
	<td class="name" nowrap><a href="#vis:map">vis:map(mode, key, action)</a></td>
	<td class="summary">Map a key to a key action.</td>
	</tr>
	<tr>
	<td class="name" nowrap><a href="#vis:map">vis:map(mode, key, alias)</a></td>
	<td class="summary">Setup a key alias.</td>
	</tr>
	<tr>
	<td class="name" nowrap><a href="#vis:mappings">vis:mappings(mode)</a></td>
	<td class="summary">Get all currently active mappings of a mode.</td>
	</tr>
	<tr>
	<td class="name" nowrap><a href="#vis:mark_names">vis:mark_names()</a></td>
	<td class="summary">Create an iterator over all mark names.</td>
	</tr>
	<tr>
	<td class="name" nowrap><a href="#vis:message">vis:message(message)</a></td>
	<td class="summary">Display a multi line message.</td>
	</tr>
	<tr>
	<td class="name" nowrap><a href="#vis:module_exist">vis:module_exist(name)</a></td>
	<td class="summary">Check whether a Lua module exists</td>
	</tr>
	<tr>
	<td class="name" nowrap><a href="#vis:motion_new">vis:motion_new(key, motion[, help])</a></td>
	<td class="summary">Map a new motion.</td>
	</tr>
	<tr>
	<td class="name" nowrap><a href="#vis:operator_new">vis:operator_new(key, operator[, help])</a></td>
	<td class="summary">Map a new operator.</td>
	</tr>
	<tr>
	<td class="name" nowrap><a href="#vis:option_register">vis:option_register(name, type, handler[, help])</a></td>
	<td class="summary">Register a custom `:set` option.</td>
	</tr>
	<tr>
	<td class="name" nowrap><a href="#vis:option_unregister">vis:option_unregister(name)</a></td>
	<td class="summary">Unregister a `:set` option.</td>
	</tr>
	<tr>
	<td class="name" nowrap><a href="#vis:pipe">vis:pipe(text, command[, fullscreen])</a></td>
	<td class="summary">Pipe a string to external process and collect output.</td>
	</tr>
	<tr>
	<td class="name" nowrap><a href="#vis:pipe">vis:pipe([file][, range], command[, fullscreen])</a></td>
	<td class="summary">Pipe file range to external process and collect output.</td>
	</tr>
	<tr>
	<td class="name" nowrap><a href="#vis:redraw">vis:redraw()</a></td>
	<td class="summary">Redraw complete user interface.</td>
	</tr>
	<tr>
	<td class="name" nowrap><a href="#vis:register_names">vis:register_names()</a></td>
	<td class="summary">Create an iterator over all register names.</td>
	</tr>
	<tr>
	<td class="name" nowrap><a href="#vis:replace">vis:replace(keys)</a></td>
	<td class="summary">Replace keys at all cursor positions of active window.</td>
	</tr>
	<tr>
	<td class="name" nowrap><a href="#vis:textobject_new">vis:textobject_new(key, textobject[, help])</a></td>
	<td class="summary">Map a new text object.</td>
	</tr>
	<tr>
	<td class="name" nowrap><a href="#vis:unmap">vis:unmap(mode, key)</a></td>
	<td class="summary">Unmap a global key binding.</td>
	</tr>
	<tr>
	<td class="name" nowrap><a href="#vis:windows">vis:windows()</a></td>
	<td class="summary">Create an iterator over all windows.</td>
	</tr>
</table>
<h2><a href="#Class_Ui">Class Ui </a></h2>
<table class="function_list">
	<tr>
	<td class="name" nowrap><a href="#ui.colors">ui.colors</a></td>
	<td class="summary">Number of available colors.</td>
	</tr>
	<tr>
	<td class="name" nowrap><a href="#ui.layout">ui.layout</a></td>
	<td class="summary">Current layout.</td>
	</tr>
</table>
<h2><a href="#Class_Window">Class Window </a></h2>
<table class="function_list">
	<tr>
	<td class="name" nowrap><a href="#window.file">window.file</a></td>
	<td class="summary">The file being displayed in this window.</td>
	</tr>
	<tr>
	<td class="name" nowrap><a href="#window.height">window.height</a></td>
	<td class="summary">The window height.</td>
	</tr>
	<tr>
	<td class="name" nowrap><a href="#window.marks">window.marks</a></td>
	<td class="summary">Window marks.</td>
	</tr>
	<tr>
	<td class="name" nowrap><a href="#window.options">window.options</a></td>
	<td class="summary">Window Options</td>
	</tr>
	<tr>
	<td class="name" nowrap><a href="#window.selection">window.selection</a></td>
	<td class="summary">The primary selection of this window.</td>
	</tr>
	<tr>
	<td class="name" nowrap><a href="#window.selections">window.selections</a></td>
	<td class="summary">The selections of this window.</td>
	</tr>
	<tr>
	<td class="name" nowrap><a href="#window.syntax">window.syntax</a></td>
	<td class="summary">The file type associated with this window.</td>
	</tr>
	<tr>
	<td class="name" nowrap><a href="#window.viewport">window.viewport</a></td>
	<td class="summary">Viewport currently being displayed.</td>
	</tr>
	<tr>
	<td class="name" nowrap><a href="#window.width">window.width</a></td>
	<td class="summary">The window width.</td>
	</tr>
	<tr>
	<td class="name" nowrap><a href="#window:close">window:close(force)</a></td>
	<td class="summary">Close window.</td>
	</tr>
	<tr>
	<td class="name" nowrap><a href="#window:draw">window:draw()</a></td>
	<td class="summary">Redraw window content.</td>
	</tr>
	<tr>
	<td class="name" nowrap><a href="#window:map">window:map(...)</a></td>
	<td class="summary">Set up a window local key mapping.</td>
	</tr>
	<tr>
	<td class="name" nowrap><a href="#window:selections_iterator">window:selections_iterator()</a></td>
	<td class="summary">Create an iterator over all selections of this window.</td>
	</tr>
	<tr>
	<td class="name" nowrap><a href="#window:set_syntax">window:set_syntax(syntax)</a></td>
	<td class="summary">Change syntax lexer to use for this window</td>
	</tr>
	<tr>
	<td class="name" nowrap><a href="#window:status">window:status(left[, right])</a></td>
	<td class="summary">Set window status line.</td>
	</tr>
	<tr>
	<td class="name" nowrap><a href="#window:style">window:style(id, start, finish[, keep_non_default])</a></td>
	<td class="summary">Style a window range.</td>
	</tr>
	<tr>
	<td class="name" nowrap><a href="#window:style_define">window:style_define(id, style)</a></td>
	<td class="summary">Define a display style.</td>
	</tr>
	<tr>
	<td class="name" nowrap><a href="#window:style_pos">window:style_pos(id, x, y[, keep_non_default])</a></td>
	<td class="summary">Style the single terminal cell at the given coordinates, relative to this window.</td>
	</tr>
	<tr>
	<td class="name" nowrap><a href="#window:unmap">window:unmap(...)</a></td>
	<td class="summary">Remove a window local key mapping.</td>
	</tr>
</table>
<h2><a href="#Class_Selection">Class Selection </a></h2>
<table class="function_list">
	<tr>
	<td class="name" nowrap><a href="#selection.anchored">selection.anchored</a></td>
	<td class="summary">Whether this selection is anchored.</td>
	</tr>
	<tr>
	<td class="name" nowrap><a href="#selection.col">selection.col</a></td>
	<td class="summary">The 1-based column position the cursor of this selection resides on.</td>
	</tr>
	<tr>
	<td class="name" nowrap><a href="#selection.line">selection.line</a></td>
	<td class="summary">The 1-based line the cursor of this selection resides on.</td>
	</tr>
	<tr>
	<td class="name" nowrap><a href="#selection.number">selection.number</a></td>
	<td class="summary">The 1-based selection index.</td>
	</tr>
	<tr>
	<td class="name" nowrap><a href="#selection.pos">selection.pos</a></td>
	<td class="summary">The zero based byte position in the file.</td>
	</tr>
	<tr>
	<td class="name" nowrap><a href="#selection.range">selection.range</a></td>
	<td class="summary">The range covered by this selection.</td>
	</tr>
	<tr>
	<td class="name" nowrap><a href="#selection:remove">selection:remove()</a></td>
	<td class="summary">Remove selection.</td>
	</tr>
	<tr>
	<td class="name" nowrap><a href="#selection:to">selection:to(line, col)</a></td>
	<td class="summary">Move cursor of selection.</td>
	</tr>
</table>
<h2><a href="#Class_File">Class File </a></h2>
<table class="function_list">
	<tr>
	<td class="name" nowrap><a href="#file.lines">file.lines</a></td>
	<td class="summary">File content by logical lines.</td>
	</tr>
	<tr>
	<td class="name" nowrap><a href="#file.modified">file.modified</a></td>
	<td class="summary">File state.</td>
	</tr>
	<tr>
	<td class="name" nowrap><a href="#file.name">file.name</a></td>
	<td class="summary">File name.</td>
	</tr>
	<tr>
	<td class="name" nowrap><a href="#file.path">file.path</a></td>
	<td class="summary">File path.</td>
	</tr>
	<tr>
	<td class="name" nowrap><a href="#file.permission">file.permission</a></td>
	<td class="summary">File permission.</td>
	</tr>
	<tr>
	<td class="name" nowrap><a href="#file.savemethod">file.savemethod</a></td>
	<td class="summary">File save method</td>
	</tr>
	<tr>
	<td class="name" nowrap><a href="#file.size">file.size</a></td>
	<td class="summary">File size in bytes.</td>
	</tr>
	<tr>
	<td class="name" nowrap><a href="#file:content">file:content(range)</a></td>
	<td class="summary">Get file content of range.</td>
	</tr>
	<tr>
	<td class="name" nowrap><a href="#file:content">file:content(pos, len)</a></td>
	<td class="summary">Get file content of position and length.</td>
	</tr>
	<tr>
	<td class="name" nowrap><a href="#file:delete">file:delete(range)</a></td>
	<td class="summary">Delete file range.</td>
	</tr>
	<tr>
	<td class="name" nowrap><a href="#file:delete">file:delete(pos, len)</a></td>
	<td class="summary">Delete data at position.</td>
	</tr>
	<tr>
	<td class="name" nowrap><a href="#file:insert">file:insert(pos, data)</a></td>
	<td class="summary">Insert data at position.</td>
	</tr>
	<tr>
	<td class="name" nowrap><a href="#file:lines_iterator">file:lines_iterator()</a></td>
	<td class="summary">Create an iterator over all lines of the file.</td>
	</tr>
	<tr>
	<td class="name" nowrap><a href="#file:mark_get">file:mark_get(mark)</a></td>
	<td class="summary">Get position of mark.</td>
	</tr>
	<tr>
	<td class="name" nowrap><a href="#file:mark_set">file:mark_set(pos)</a></td>
	<td class="summary">Set mark.</td>
	</tr>
	<tr>
	<td class="name" nowrap><a href="#file:match_at">file:match_at(pattern, pos[, horizon])</a></td>
	<td class="summary">Check whether LPeg pattern matches at a given file position.</td>
	</tr>
	<tr>
	<td class="name" nowrap><a href="#file:snapshot">file:snapshot()</a></td>
	<td class="summary">Create a restore point for undo/redo.</td>
	</tr>
	<tr>
	<td class="name" nowrap><a href="#file:text_object_longword">file:text_object_longword(pos)</a></td>
	<td class="summary">WORD text object.</td>
	</tr>
	<tr>
	<td class="name" nowrap><a href="#file:text_object_word">file:text_object_word(pos)</a></td>
	<td class="summary">Word text object.</td>
	</tr>
</table>
<h2><a href="#Class_Range">Class Range </a></h2>
<table class="function_list">
	<tr>
	<td class="name" nowrap><a href="#range.finish">range.finish</a></td>
	<td class="summary">The end of the range.</td>
	</tr>
	<tr>
	<td class="name" nowrap><a href="#range.start">range.start</a></td>
	<td class="summary">The beginning of the range.</td>
	</tr>
</table>
<h2><a href="#Layouts">Layouts </a></h2>
<table class="function_list">
	<tr>
	<td class="name" nowrap><a href="#layouts">layouts</a></td>
	<td class="summary">Layout Constants.</td>
	</tr>
</table>
<h2><a href="#Modes">Modes </a></h2>
<table class="function_list">
	<tr>
	<td class="name" nowrap><a href="#modes">modes</a></td>
	<td class="summary">Mode constants.</td>
	</tr>
</table>
<h2><a href="#Key_Handling">Key Handling </a></h2>
<table class="function_list">
	<tr>
	<td class="name" nowrap><a href="#keyhandler">keyhandler(keys)</a></td>
	<td class="summary">Example of a key handling function.</td>
	</tr>
</table>
<h2><a href="#Core_Events">Core Events </a></h2>
<table class="function_list">
	<tr>
	<td class="name" nowrap><a href="#file_close">file_close(file)</a></td>
	<td class="summary">File close.</td>
	</tr>
	<tr>
	<td class="name" nowrap><a href="#file_open">file_open(file)</a></td>
	<td class="summary">File open.</td>
	</tr>
	<tr>
	<td class="name" nowrap><a href="#file_save_post">file_save_post(file, path)</a></td>
	<td class="summary">File post save.</td>
	</tr>
	<tr>
	<td class="name" nowrap><a href="#file_save_pre">file_save_pre(file, path)</a></td>
	<td class="summary">File pre save.</td>
	</tr>
	<tr>
	<td class="name" nowrap><a href="#init">init()</a></td>
	<td class="summary">Editor initialization completed.</td>
	</tr>
	<tr>
	<td class="name" nowrap><a href="#input">input(key)</a></td>
	<td class="summary">Input key event in either input or replace mode.</td>
	</tr>
	<tr>
	<td class="name" nowrap><a href="#process_response">process_response(name, response_type, code, buffer)</a></td>
	<td class="summary">The response received from the process started via ???.</td>
	</tr>
	<tr>
	<td class="name" nowrap><a href="#quit">quit()</a></td>
	<td class="summary">Editor is about to terminate.</td>
	</tr>
	<tr>
	<td class="name" nowrap><a href="#start">start()</a></td>
	<td class="summary">Editor startup completed.</td>
	</tr>
	<tr>
	<td class="name" nowrap><a href="#term_csi">term_csi(List)</a></td>
	<td class="summary">CSI command received from terminal.</td>
	</tr>
	<tr>
	<td class="name" nowrap><a href="#ui_draw">ui_draw()</a></td>
	<td class="summary">Emitted immediately before the UI is drawn to the screen.</td>
	</tr>
	<tr>
	<td class="name" nowrap><a href="#win_close">win_close(win)</a></td>
	<td class="summary">Window close.</td>
	</tr>
	<tr>
	<td class="name" nowrap><a href="#win_highlight">win_highlight(win)</a></td>
	<td class="summary">Window highlight.</td>
	</tr>
	<tr>
	<td class="name" nowrap><a href="#win_open">win_open(win)</a></td>
	<td class="summary">Window open.</td>
	</tr>
	<tr>
	<td class="name" nowrap><a href="#win_status">win_status(win)</a></td>
	<td class="summary">Window status bar redraw.</td>
	</tr>
</table>
<h2><a href="#Events">Events </a></h2>
<table class="function_list">
	<tr>
	<td class="name" nowrap><a href="#events">events</a></td>
	<td class="summary">Event names.</td>
	</tr>
	<tr>
	<td class="name" nowrap><a href="#events.emit">events.emit(event, ...)</a></td>
	<td class="summary">Generate event.</td>
	</tr>
	<tr>
	<td class="name" nowrap><a href="#events.subscribe">events.subscribe(event, handler[, index])</a></td>
	<td class="summary">Subscribe to an event.</td>
	</tr>
	<tr>
	<td class="name" nowrap><a href="#events.unsubscribe">events.unsubscribe(event, handler)</a></td>
	<td class="summary">Unsubscribe from an event.</td>
	</tr>
</table>

<br/>
<br/>


    <h2 class="section-header has-description"><a name="Class_Vis"></a>Class Vis </h2>

          <div class="section-description">
          The main editor object.
          </div>
    <dl class="function">
    <dt>
    <a name = "vis.VERSION"></a>
    <strong>vis.VERSION</strong>
    </dt>
    <dd>
    Version information.


    <ul>
        <li><span class="parameter">VERSION</span>
            <span class="types"><a class="type" href="https://www.lua.org/manual/5.1/manual.html#5.4">string</a></span>

 version information in `git describe` format, same as reported by `vis -v`.
        </li>
    </ul>





</dd>
    <dt>
    <a name = "vis.count"></a>
    <strong>vis.count</strong>
    </dt>
    <dd>
    Current count.


    <ul>
        <li><span class="parameter">count</span>
            <span class="types"><span class="type">int</span></span>
         the specified count for the current command or `nil` if none was given
        </li>
    </ul>





</dd>
    <dt>
    <a name = "vis.events"></a>
    <strong>vis.events</strong>
    </dt>
    <dd>
    Events.


    <ul>
        <li><span class="parameter">events</span>
            <span class="types"><a class="type" href="index.html#events">events</a></span>

        </li>
    </ul>





</dd>
    <dt>
    <a name = "vis.input_queue"></a>
    <strong>vis.input_queue</strong>
    </dt>
    <dd>
    Currently unconsumed keys in the input queue.


    <ul>
        <li><span class="parameter">input_queue</span>
            <span class="types"><a class="type" href="https://www.lua.org/manual/5.1/manual.html#5.4">string</a></span>

        </li>
    </ul>





</dd>
    <dt>
    <a name = "vis.lexers"></a>
    <strong>vis.lexers</strong>
    </dt>
    <dd>
    Scintillua lexer module.


    <ul>
        <li><span class="parameter">lexers</span>
         might be `nil` if module is not found
        </li>
    </ul>





</dd>
    <dt>
    <a name = "vis.lpeg"></a>
    <strong>vis.lpeg</strong>
    </dt>
    <dd>
    LPeg lexer module.


    <ul>
        <li><span class="parameter">lpeg</span>
         might be `nil` if module is not found
        </li>
    </ul>





</dd>
    <dt>
    <a name = "vis.mark"></a>
    <strong>vis.mark</strong>
    </dt>
    <dd>
    Mark name in use.


    <ul>
        <li><span class="parameter">mark</span>
            <span class="types"><a class="type" href="https://www.lua.org/manual/5.1/manual.html#5.4">string</a></span>

        </li>
    </ul>





</dd>
    <dt>
    <a name = "vis.mode"></a>
    <strong>vis.mode</strong>
    </dt>
    <dd>
    Currently active mode.


    <ul>
        <li><span class="parameter">mode</span>
            <span class="types"><a class="type" href="index.html#modes">modes</a></span>

        </li>
    </ul>





</dd>
    <dt>
    <a name = "vis.modes"></a>
    <strong>vis.modes</strong>
    </dt>
    <dd>
    Mode constants.


    <ul>
        <li><span class="parameter">modes</span>
            <span class="types"><a class="type" href="index.html#modes">modes</a></span>

        </li>
    </ul>





</dd>
    <dt>
    <a name = "vis.options"></a>
    <strong>vis.options</strong>
    </dt>
    <dd>
    Vis Options


    <h3>Fields:</h3>
    <ul>
        <li><span class="parameter">autoindent</span>
            <span class="types"><span class="type">boolean</span></span>
         {ai}
         (<em>default</em> false)
        </li>
        <li><span class="parameter">changecolors</span>
            <span class="types"><span class="type">boolean</span></span>

         (<em>default</em> false)
        </li>
        <li><span class="parameter">escdelay</span>
            <span class="types"><span class="type">int</span></span>

         (<em>default</em> 50)
        </li>
        <li><span class="parameter">ignorecase</span>
            <span class="types"><span class="type">boolean</span></span>
         {ic}
         (<em>default</em> false)
        </li>
        <li><span class="parameter">loadmethod</span>
            <span class="types"><a class="type" href="https://www.lua.org/manual/5.1/manual.html#5.4">string</a></span>
         `"auto"`, `"read"`, or `"mmap"`.
         (<em>default</em> "auto")
        </li>
        <li><span class="parameter">shell</span>
            <span class="types"><a class="type" href="https://www.lua.org/manual/5.1/manual.html#5.4">string</a></span>

         (<em>default</em> "/bin/sh")
        </li>
    </ul>



    <h3>See also:</h3>
    <ul>
    </ul>


</dd>
    <dt>
    <a name = "vis.recording"></a>
    <strong>vis.recording</strong>
    </dt>
    <dd>
    Whether a macro is being recorded.


    <ul>
        <li><span class="parameter">recording</span>
            <span class="types"><span class="type">bool</span></span>

        </li>
    </ul>





</dd>
    <dt>
    <a name = "vis.register"></a>
    <strong>vis.register</strong>
    </dt>
    <dd>
    Register name in use.


    <ul>
        <li><span class="parameter">register</span>
            <span class="types"><a class="type" href="https://www.lua.org/manual/5.1/manual.html#5.4">string</a></span>

        </li>
    </ul>





</dd>
    <dt>
    <a name = "vis.registers"></a>
    <strong>vis.registers</strong>
    </dt>
    <dd>
    Registers.


    <ul>
        <li><span class="parameter">registers</span>
         array to access the register by single letter name
        </li>
    </ul>





</dd>
    <dt>
    <a name = "vis.ui"></a>
    <strong>vis.ui</strong>
    </dt>
    <dd>
    User interface.


    <ul>
        <li><span class="parameter">ui</span>
            <span class="types"><a class="type" href="index.html#Class_Ui">Ui</a></span>
         the user interface being used
        </li>
    </ul>





</dd>
    <dt>
    <a name = "vis.win"></a>
    <strong>vis.win</strong>
    </dt>
    <dd>
    Currently active window.


    <ul>
        <li><span class="parameter">win</span>
            <span class="types"><a class="type" href="index.html#Class_Window">Window</a></span>

        </li>
    </ul>



    <h3>See also:</h3>
    <ul>
         <a href="index.html#vis:windows">windows</a>
    </ul>


</dd>
    <dt>
    <a name = "vis:action_register"></a>
    <strong>vis:action_register(name, func[, help])</strong>
    </dt>
    <dd>
    Register a Lua function as key action.


    <h3>Parameters:</h3>
    <ul>
        <li><span class="parameter">name</span>
            <span class="types"><a class="type" href="https://www.lua.org/manual/5.1/manual.html#5.4">string</a></span>
         the name of the action, can be referred to in key bindings as `<name>` pseudo key
        </li>
        <li><span class="parameter">func</span>
            <span class="types"><span class="type">Function</span></span>
         the lua function implementing the key action (see <a href="index.html#keyhandler">keyhandler</a>)
        </li>
        <li><span class="parameter">help</span>
            <span class="types"><a class="type" href="https://www.lua.org/manual/5.1/manual.html#5.4">string</a></span>
         the single line help text as displayed in `:help`
         (<em>optional</em>)
        </li>
    </ul>

    <h3>Returns:</h3>
    <ol>

           <span class="types"><span class="type">KeyAction</span></span>
        action the registered key action
    </ol>


    <h3>See also:</h3>
    <ul>
    </ul>


</dd>
    <dt>
    <a name = "vis:close"></a>
    <strong>vis:close(inputfd)</strong>
    </dt>
    <dd>
    Closes a stream returned by ???.


    <h3>Parameters:</h3>
    <ul>
        <li><span class="parameter">inputfd</span>
            <span class="types"><span class="type">io.file</span></span>
         the stream to be closed
        </li>
    </ul>

    <h3>Returns:</h3>
    <ol>

           <span class="types"><span class="type">bool</span></span>
        identical to <a href="https://www.lua.org/manual/5.1/manual.html#pdf-io.close">io.close</a>
    </ol>




</dd>
    <dt>
    <a name = "vis:command"></a>
    <strong>vis:command(command)</strong>
    </dt>
    <dd>
    Execute a `:`-command.


    <h3>Parameters:</h3>
    <ul>
        <li><span class="parameter">command</span>
            <span class="types"><a class="type" href="https://www.lua.org/manual/5.1/manual.html#5.4">string</a></span>
         the command to execute
        </li>
    </ul>

    <h3>Returns:</h3>
    <ol>

           <span class="types"><span class="type">bool</span></span>
        whether the command succeeded
    </ol>



    <h3>Usage:</h3>
    <ul>
        <pre class="example">vis:<span class="function-name">command</span>(<span class="string">"set number"</span>)</pre>
    </ul>

</dd>
    <dt>
    <a name = "vis:command_register"></a>
    <strong>vis:command_register(name, command[, help])</strong>
    </dt>
    <dd>
    Register a custom `:`-command.


    <h3>Parameters:</h3>
    <ul>
        <li><span class="parameter">name</span>
            <span class="types"><a class="type" href="https://www.lua.org/manual/5.1/manual.html#5.4">string</a></span>
         the command name
        </li>
        <li><span class="parameter">command</span>
            <span class="types"><span class="type">function</span></span>
         the Lua function implementing the command
        </li>
        <li><span class="parameter">help</span>
            <span class="types"><a class="type" href="https://www.lua.org/manual/5.1/manual.html#5.4">string</a></span>
         the single line help text as displayed in `:help`
         (<em>optional</em>)
        </li>
    </ul>

    <h3>Returns:</h3>
    <ol>

           <span class="types"><span class="type">bool</span></span>
        whether the command has been successfully registered
    </ol>



    <h3>Usage:</h3>
    <ul>
        <pre class="example">vis:<span class="function-name">command_register</span>(<span class="string">"foo"</span>, <span class="keyword">function</span>(argv, force, win, selection, range)
	 <span class="keyword">for</span> i,arg <span class="keyword">in</span> <span class="global">ipairs</span>(argv) <span class="keyword">do</span>
		 <span class="global">print</span>(i..<span class="string">": "</span>..arg)
	 <span class="keyword">end</span>
	 <span class="global">print</span>(<span class="string">"was command forced with ! "</span>..(force <span class="keyword">and</span> <span class="string">"yes"</span> <span class="keyword">or</span> <span class="string">"no"</span>))
	 <span class="global">print</span>(win.file.name)
	 <span class="global">print</span>(selection.pos)
	 <span class="global">print</span>(range ~= <span class="keyword">nil</span> <span class="keyword">and</span> (<span class="string">'['</span>..range.start..<span class="string">', '</span>..range.finish..<span class="string">']'</span>) <span class="keyword">or</span> <span class="string">"invalid range"</span>)
	 <span class="keyword">return</span> <span class="keyword">true</span>;
<span class="keyword">end</span>)</pre>
    </ul>

</dd>
    <dt>
    <a name = "vis:communicate"></a>
    <strong>vis:communicate(name, command)</strong>
    </dt>
    <dd>
    Open new process and return its input stream (stdin).
 If the stream is closed (by calling the close method or by being removed by a garbage collector)
 the spawned process will be killed by SIGTERM.
 When the process will quit or will output anything to stdout or stderr,
 the <a href="index.html#process_response">process_response</a> event will be fired.
<p> The editor core won't be blocked while the external process is running.



    <h3>Parameters:</h3>
    <ul>
        <li><span class="parameter">name</span>
            <span class="types"><a class="type" href="https://www.lua.org/manual/5.1/manual.html#5.4">string</a></span>
         the name of subprocess (to distinguish processes in the <a href="index.html#process_response">process_response</a> event)
        </li>
        <li><span class="parameter">command</span>
            <span class="types"><a class="type" href="https://www.lua.org/manual/5.1/manual.html#5.4">string</a></span>
         the command to execute
        </li>
    </ul>

    <h3>Returns:</h3>
    <ol>

        the file handle to write data to the process, in case of error the return values are equivalent to <a href="https://www.lua.org/manual/5.1/manual.html#pdf-io.open">io.open</a> error values.
    </ol>




</dd>
    <dt>
    <a name = "vis:complete_command"></a>
    <strong>vis:complete_command(prefix)</strong>
    </dt>
    <dd>
    Let user pick a command matching the given prefix.
<p> The editor core will be blocked while the external process is running.



    <h3>Parameters:</h3>
    <ul>
        <li><span class="parameter">prefix</span>
            <span class="types"><a class="type" href="https://www.lua.org/manual/5.1/manual.html#5.4">string</a></span>
         the prefix of the command to be completed
        </li>
    </ul>

    <h3>Returns:</h3>
    <ol>
        <li>
           <span class="types"><span class="type">int</span></span>
        code the exit status of the executed command</li>
        <li>
           <span class="types"><a class="type" href="https://www.lua.org/manual/5.1/manual.html#5.4">string</a></span>
        stdout the data written to stdout</li>
        <li>
           <span class="types"><a class="type" href="https://www.lua.org/manual/5.1/manual.html#5.4">string</a></span>
        stderr the data written to stderr</li>
    </ol>




</dd>
    <dt>
    <a name = "vis:exit"></a>
    <strong>vis:exit(code)</strong>
    </dt>
    <dd>
    Terminate editor process.
<p> Termination happens upon the next iteration of the main event loop.
 This means the calling Lua code will be executed further until it
 eventually hands over control to the editor core. The exit status
 of the most recent call is used.
<p> All unsaved changes will be lost!



    <h3>Parameters:</h3>
    <ul>
        <li><span class="parameter">code</span>
            <span class="types"><span class="type">int</span></span>
         the exit status returned to the operating system
        </li>
    </ul>





</dd>
    <dt>
    <a name = "vis:feedkeys"></a>
    <strong>vis:feedkeys(keys)</strong>
    </dt>
    <dd>
    Push keys to input queue and interpret them.
<p> The keys are processed as if they were read from the keyboard.



    <h3>Parameters:</h3>
    <ul>
        <li><span class="parameter">keys</span>
            <span class="types"><a class="type" href="https://www.lua.org/manual/5.1/manual.html#5.4">string</a></span>
         the keys to interpret
        </li>
    </ul>





</dd>
    <dt>
    <a name = "vis:files"></a>
    <strong>vis:files()</strong>
    </dt>
    <dd>
    Create an iterator over all files.



    <h3>Returns:</h3>
    <ol>

        the new iterator
    </ol>



    <h3>Usage:</h3>
    <ul>
        <pre class="example"><span class="keyword">for</span> file <span class="keyword">in</span> vis:<span class="function-name">files</span>() <span class="keyword">do</span>
	<span class="comment">-- do something with file
</span><span class="keyword">end</span></pre>
    </ul>

</dd>
    <dt>
    <a name = "vis:info"></a>
    <strong>vis:info(message)</strong>
    </dt>
    <dd>
    Display a short message.
<p> The single line message will be displayed at the bottom of
 the screen and automatically hidden once a key is pressed.



    <h3>Parameters:</h3>
    <ul>
        <li><span class="parameter">message</span>
            <span class="types"><a class="type" href="https://www.lua.org/manual/5.1/manual.html#5.4">string</a></span>
         the message to display
        </li>
    </ul>





</dd>
    <dt>
    <a name = "vis:insert"></a>
    <strong>vis:insert(keys)</strong>
    </dt>
    <dd>
    Insert keys at all cursor positions of active window.
<p> This function behaves as if the keys were entered in insert mode,
 but in contrast to ??? it bypasses the input queue,
 meaning mappings do not apply and the keys will not be recorded in macros.



    <h3>Parameters:</h3>
    <ul>
        <li><span class="parameter">keys</span>
            <span class="types"><a class="type" href="https://www.lua.org/manual/5.1/manual.html#5.4">string</a></span>
         the keys to insert
        </li>
    </ul>



    <h3>See also:</h3>
    <ul>
    </ul>


</dd>
    <dt>
    <a name = "vis:map"></a>
    <strong>vis:map(mode, key, func[, help])</strong>
    </dt>
    <dd>
    Map a key to a Lua function.
<p> Creates a new key mapping in a given mode.



    <h3>Parameters:</h3>
    <ul>
        <li><span class="parameter">mode</span>
            <span class="types"><span class="type">int</span></span>
         the mode to which the mapping should be added
        </li>
        <li><span class="parameter">key</span>
            <span class="types"><a class="type" href="https://www.lua.org/manual/5.1/manual.html#5.4">string</a></span>
         the key to map
        </li>
        <li><span class="parameter">func</span>
            <span class="types"><span class="type">function</span></span>
         the Lua function to handle the key mapping (see <a href="index.html#keyhandler">keyhandler</a>)
        </li>
        <li><span class="parameter">help</span>
            <span class="types"><a class="type" href="https://www.lua.org/manual/5.1/manual.html#5.4">string</a></span>
         the single line help text as displayed in `:help`
         (<em>optional</em>)
        </li>
    </ul>

    <h3>Returns:</h3>
    <ol>

           <span class="types"><span class="type">bool</span></span>
        whether the mapping was successfully established
    </ol>


    <h3>See also:</h3>
    <ul>
    </ul>

    <h3>Usage:</h3>
    <ul>
        <pre class="example">vis:<span class="function-name">map</span>(vis.modes.INSERT, <span class="string">"&lt;C-k&gt;"</span>, <span class="keyword">function</span>(keys)
	<span class="keyword">if</span> #keys &lt; <span class="number">2</span> <span class="keyword">then</span>
		<span class="keyword">return</span> -<span class="number">1</span> <span class="comment">-- need more input
</span>	<span class="keyword">end</span>
	<span class="keyword">local</span> digraph = keys:<span class="function-name">sub</span>(<span class="number">1</span>, <span class="number">2</span>)
	<span class="keyword">if</span> digraph == <span class="string">"l*"</span> <span class="keyword">then</span>
		vis:<span class="function-name">feedkeys</span>(<span class="string">'λ'</span>)
		<span class="keyword">return</span> <span class="number">2</span> <span class="comment">-- consume 2 bytes of input
</span>	<span class="keyword">end</span>
<span class="keyword">end</span>, <span class="string">"Insert digraph"</span>)</pre>
    </ul>

</dd>
    <dt>
    <a name = "vis:map"></a>
    <strong>vis:map(mode, key, action)</strong>
    </dt>
    <dd>
    Map a key to a key action.


    <h3>Parameters:</h3>
    <ul>
        <li><span class="parameter">mode</span>
            <span class="types"><span class="type">int</span></span>
         the mode to which the mapping should be added
        </li>
        <li><span class="parameter">key</span>
            <span class="types"><a class="type" href="https://www.lua.org/manual/5.1/manual.html#5.4">string</a></span>
         the key to map
        </li>
        <li><span class="parameter">action</span>
         the action to map
        </li>
    </ul>

    <h3>Returns:</h3>
    <ol>

           <span class="types"><span class="type">bool</span></span>
        whether the mapping was successfully established
    </ol>


    <h3>See also:</h3>
    <ul>
    </ul>

    <h3>Usage:</h3>
    <ul>
        <pre class="example"><span class="keyword">local</span> action = vis:<span class="function-name">action_register</span>(<span class="string">"info"</span>, <span class="keyword">function</span>()
  vis:<span class="function-name">info</span>(<span class="string">"Mapping works!"</span>)
<span class="keyword">end</span>, <span class="string">"Info message help text"</span>)
vis:<span class="function-name">map</span>(vis.modes.NORMAL, <span class="string">"gh"</span>, action)
vis:<span class="function-name">map</span>(vis.modes.NORMAL, <span class="string">"gl"</span>, action)</pre>
    </ul>

</dd>
    <dt>
    <a name = "vis:map"></a>
    <strong>vis:map(mode, key, alias)</strong>
    </dt>
    <dd>
    Setup a key alias.
<p> This is equivalent to `vis:command('map! mode key alias')`.
<p> Mappings are always recursive!


    <h3>Parameters:</h3>
    <ul>
        <li><span class="parameter">mode</span>
            <span class="types"><span class="type">int</span></span>
         the mode to which the mapping should be added
        </li>
        <li><span class="parameter">key</span>
            <span class="types"><a class="type" href="https://www.lua.org/manual/5.1/manual.html#5.4">string</a></span>
         the key to map
        </li>
        <li><span class="parameter">alias</span>
            <span class="types"><a class="type" href="https://www.lua.org/manual/5.1/manual.html#5.4">string</a></span>
         the key to map to
        </li>
    </ul>

    <h3>Returns:</h3>
    <ol>

           <span class="types"><span class="type">bool</span></span>
        whether the mapping was successfully established
    </ol>


    <h3>See also:</h3>
    <ul>
    </ul>

    <h3>Usage:</h3>
    <ul>
        <pre class="example">vis:<span class="function-name">map</span>(vis.modes.NORMAL, <span class="string">"j"</span>, <span class="string">"k"</span>)</pre>
    </ul>

</dd>
    <dt>
    <a name = "vis:mappings"></a>
    <strong>vis:mappings(mode)</strong>
    </dt>
    <dd>
    Get all currently active mappings of a mode.


    <h3>Parameters:</h3>
    <ul>
        <li><span class="parameter">mode</span>
            <span class="types"><span class="type">int</span></span>
         the mode to query
        </li>
    </ul>

    <h3>Returns:</h3>
    <ol>

           <span class="types"><a class="type" href="https://www.lua.org/manual/5.1/manual.html#5.5">table</a></span>
        the active mappings and their associated help texts
    </ol>


    <h3>See also:</h3>
    <ul>
    </ul>

    <h3>Usage:</h3>
    <ul>
        <pre class="example"><span class="keyword">local</span> bindings = vis:<span class="function-name">mappings</span>(vis.modes.NORMAL)
<span class="keyword">for</span> key, help <span class="keyword">in</span> <span class="global">pairs</span>(bindings) <span class="keyword">do</span>
	<span class="comment">-- do something
</span><span class="keyword">end</span></pre>
    </ul>

</dd>
    <dt>
    <a name = "vis:mark_names"></a>
    <strong>vis:mark_names()</strong>
    </dt>
    <dd>
    Create an iterator over all mark names.



    <h3>Returns:</h3>
    <ol>

        the new iterator
    </ol>



    <h3>Usage:</h3>
    <ul>
        <pre class="example"><span class="keyword">local</span> marks = vis.win.marks
<span class="keyword">for</span> name <span class="keyword">in</span> vis:<span class="function-name">mark_names</span>() <span class="keyword">do</span>
	<span class="keyword">local</span> mark = marks[name]
	<span class="keyword">for</span> i = <span class="number">1</span>, #mark <span class="keyword">do</span>
		<span class="comment">-- do something with: name, mark[i].start, mark[i].finish
</span>	<span class="keyword">end</span>
<span class="keyword">end</span></pre>
    </ul>

</dd>
    <dt>
    <a name = "vis:message"></a>
    <strong>vis:message(message)</strong>
    </dt>
    <dd>
    Display a multi line message.
<p> Opens a new window and displays an arbitrarily long message.



    <h3>Parameters:</h3>
    <ul>
        <li><span class="parameter">message</span>
            <span class="types"><a class="type" href="https://www.lua.org/manual/5.1/manual.html#5.4">string</a></span>
         the message to display
        </li>
    </ul>





</dd>
    <dt>
    <a name = "vis:module_exist"></a>
    <strong>vis:module_exist(name)</strong>
    </dt>
    <dd>
    Check whether a Lua module exists  Checks whether a subsequent <a href="https://www.lua.org/manual/5.1/manual.html#pdf-require">require</a> call will succeed.


    <h3>Parameters:</h3>
    <ul>
        <li><span class="parameter">name</span>
            <span class="types"><a class="type" href="https://www.lua.org/manual/5.1/manual.html#5.4">string</a></span>
         the module name to check
        </li>
    </ul>

    <h3>Returns:</h3>
    <ol>

           <span class="types"><span class="type">bool</span></span>
        whether the module was found
    </ol>




</dd>
    <dt>
    <a name = "vis:motion_new"></a>
    <strong>vis:motion_new(key, motion[, help])</strong>
    </dt>
    <dd>
    Map a new motion.
<p> Sets up a mapping in normal, visual and operator pending mode.
 The motion function will receive the <a href="index.html#Class_Window">Window</a> and an initial position
 (in bytes from the start of the file) as argument and is expected to
 return the resulting position.


    <h3>Parameters:</h3>
    <ul>
        <li><span class="parameter">key</span>
            <span class="types"><a class="type" href="https://www.lua.org/manual/5.1/manual.html#5.4">string</a></span>
         the key to associate with the new option
        </li>
        <li><span class="parameter">motion</span>
            <span class="types"><span class="type">function</span></span>
         the motion logic implemented as Lua function
        </li>
        <li><span class="parameter">help</span>
            <span class="types"><a class="type" href="https://www.lua.org/manual/5.1/manual.html#5.4">string</a></span>
         the single line help text as displayed in `:help`
         (<em>optional</em>)
        </li>
    </ul>

    <h3>Returns:</h3>
    <ol>

           <span class="types"><span class="type">bool</span></span>
        whether the new motion could be installed
    </ol>



    <h3>Usage:</h3>
    <ul>
        <pre class="example">vis:<span class="function-name">motion_new</span>(<span class="string">"&lt;C-l&gt;"</span>, <span class="keyword">function</span>(win, pos)
	<span class="keyword">return</span> pos+<span class="number">1</span>
<span class="keyword">end</span>, <span class="string">"Advance to next byte"</span>)</pre>
    </ul>

</dd>
    <dt>
    <a name = "vis:operator_new"></a>
    <strong>vis:operator_new(key, operator[, help])</strong>
    </dt>
    <dd>
    Map a new operator.
<p> Sets up a mapping in normal, visual and operator pending mode.
 The operator function will receive the <a href="index.html#Class_File">File</a>, <a href="index.html#Class_Range">Range</a> and position
 to operate on and is expected to return the new cursor position.



    <h3>Parameters:</h3>
    <ul>
        <li><span class="parameter">key</span>
            <span class="types"><a class="type" href="https://www.lua.org/manual/5.1/manual.html#5.4">string</a></span>
         the key to associate with the new operator
        </li>
        <li><span class="parameter">operator</span>
            <span class="types"><span class="type">function</span></span>
         the operator logic implemented as Lua function
        </li>
        <li><span class="parameter">help</span>
            <span class="types"><a class="type" href="https://www.lua.org/manual/5.1/manual.html#5.4">string</a></span>
         the single line help text as displayed in `:help`
         (<em>optional</em>)
        </li>
    </ul>

    <h3>Returns:</h3>
    <ol>

           <span class="types"><span class="type">bool</span></span>
        whether the new operator could be installed
    </ol>



    <h3>Usage:</h3>
    <ul>
        <pre class="example">vis:<span class="function-name">operator_new</span>(<span class="string">"gq"</span>, <span class="keyword">function</span>(file, range, pos)
	<span class="keyword">local</span> status, out, err = vis:<span class="function-name">pipe</span>(file, range, <span class="string">"fmt"</span>)
	<span class="keyword">if</span> status ~= <span class="number">0</span> <span class="keyword">then</span>
		vis:<span class="function-name">info</span>(err)
	<span class="keyword">else</span>
		file:<span class="function-name">delete</span>(range)
		file:<span class="function-name">insert</span>(range.start, out)
	<span class="keyword">end</span>
	<span class="keyword">return</span> range.start <span class="comment">-- new cursor location
</span><span class="keyword">end</span>, <span class="string">"Formatting operator, filter range through fmt(1)"</span>)</pre>
    </ul>

</dd>
    <dt>
    <a name = "vis:option_register"></a>
    <strong>vis:option_register(name, type, handler[, help])</strong>
    </dt>
    <dd>
    Register a custom `:set` option.


    <h3>Parameters:</h3>
    <ul>
        <li><span class="parameter">name</span>
            <span class="types"><a class="type" href="https://www.lua.org/manual/5.1/manual.html#5.4">string</a></span>
         the option name
        </li>
        <li><span class="parameter">type</span>
            <span class="types"><a class="type" href="https://www.lua.org/manual/5.1/manual.html#5.4">string</a></span>
         the option type (`bool`, `string` or `number`)
        </li>
        <li><span class="parameter">handler</span>
            <span class="types"><span class="type">function</span></span>
         the Lua function being called when the option is changed
        </li>
        <li><span class="parameter">help</span>
            <span class="types"><a class="type" href="https://www.lua.org/manual/5.1/manual.html#5.4">string</a></span>
         the single line help text as displayed in `:help`
         (<em>optional</em>)
        </li>
    </ul>

    <h3>Returns:</h3>
    <ol>

           <span class="types"><span class="type">bool</span></span>
        whether the option was successfully registered
    </ol>



    <h3>Usage:</h3>
    <ul>
        <pre class="example">vis:<span class="function-name">option_register</span>(<span class="string">"foo"</span>, <span class="string">"bool"</span>, <span class="keyword">function</span>(value, toggle)
	<span class="keyword">if</span> <span class="keyword">not</span> vis.win <span class="keyword">then</span> <span class="keyword">return</span> <span class="keyword">false</span> <span class="keyword">end</span>
	vis.win.foo = toggle <span class="keyword">and</span> <span class="keyword">not</span> vis.win.foo <span class="keyword">or</span> value
	vis:<span class="function-name">info</span>(<span class="string">"Option foo = "</span> .. <span class="global">tostring</span>(vis.win.foo))
	<span class="keyword">return</span> <span class="keyword">true</span>
<span class="keyword">end</span>, <span class="string">"Foo enables superpowers"</span>)</pre>
    </ul>

</dd>
    <dt>
    <a name = "vis:option_unregister"></a>
    <strong>vis:option_unregister(name)</strong>
    </dt>
    <dd>
    Unregister a `:set` option.


    <h3>Parameters:</h3>
    <ul>
        <li><span class="parameter">name</span>
            <span class="types"><a class="type" href="https://www.lua.org/manual/5.1/manual.html#5.4">string</a></span>
         the option name
        </li>
    </ul>

    <h3>Returns:</h3>
    <ol>

           <span class="types"><span class="type">bool</span></span>
        whether the option was successfully unregistered
    </ol>




</dd>
    <dt>
    <a name = "vis:pipe"></a>
    <strong>vis:pipe(text, command[, fullscreen])</strong>
    </dt>
    <dd>
    Pipe a string to external process and collect output.
<p> The editor core will be blocked while the external process is running.



    <h3>Parameters:</h3>
    <ul>
        <li><span class="parameter">text</span>
            <span class="types"><a class="type" href="https://www.lua.org/manual/5.1/manual.html#5.4">string</a></span>
         the text written to the external command
        </li>
        <li><span class="parameter">command</span>
            <span class="types"><a class="type" href="https://www.lua.org/manual/5.1/manual.html#5.4">string</a></span>
         the command to execute
        </li>
        <li><span class="parameter">fullscreen</span>
            <span class="types"><span class="type">bool</span></span>
         whether command is a fullscreen program (e.g. curses based)
         (<em>optional</em>)
        </li>
    </ul>

    <h3>Returns:</h3>
    <ol>
        <li>
           <span class="types"><span class="type">int</span></span>
        code the exit status of the executed command</li>
        <li>
           <span class="types"><a class="type" href="https://www.lua.org/manual/5.1/manual.html#5.4">string</a></span>
        stdout the data written to stdout</li>
        <li>
           <span class="types"><a class="type" href="https://www.lua.org/manual/5.1/manual.html#5.4">string</a></span>
        stderr the data written to stderr</li>
    </ol>




</dd>
    <dt>
    <a name = "vis:pipe"></a>
    <strong>vis:pipe([file][, range], command[, fullscreen])</strong>
    </dt>
    <dd>
    Pipe file range to external process and collect output.
<p> The editor core will be blocked while the external process is running.
 File and Range can be omitted or nil to indicate empty input.



    <h3>Parameters:</h3>
    <ul>
        <li><span class="parameter">file</span>
            <span class="types"><a class="type" href="index.html#Class_File">File</a></span>
         the file to which the range applies
         (<em>optional</em>)
        </li>
        <li><span class="parameter">range</span>
            <span class="types"><a class="type" href="index.html#Class_Range">Range</a></span>
         the range to pipe
         (<em>optional</em>)
        </li>
        <li><span class="parameter">command</span>
            <span class="types"><a class="type" href="https://www.lua.org/manual/5.1/manual.html#5.4">string</a></span>
         the command to execute
        </li>
        <li><span class="parameter">fullscreen</span>
            <span class="types"><span class="type">bool</span></span>
         whether command is a fullscreen program (e.g. curses based)
         (<em>optional</em>)
        </li>
    </ul>

    <h3>Returns:</h3>
    <ol>
        <li>
           <span class="types"><span class="type">int</span></span>
        code the exit status of the executed command</li>
        <li>
           <span class="types"><a class="type" href="https://www.lua.org/manual/5.1/manual.html#5.4">string</a></span>
        stdout the data written to stdout</li>
        <li>
           <span class="types"><a class="type" href="https://www.lua.org/manual/5.1/manual.html#5.4">string</a></span>
        stderr the data written to stderr</li>
    </ol>




</dd>
    <dt>
    <a name = "vis:redraw"></a>
    <strong>vis:redraw()</strong>
    </dt>
    <dd>
    Redraw complete user interface.
<p> Will trigger redraw events, make sure to avoid recursive events.








</dd>
    <dt>
    <a name = "vis:register_names"></a>
    <strong>vis:register_names()</strong>
    </dt>
    <dd>
    Create an iterator over all register names.



    <h3>Returns:</h3>
    <ol>

        the new iterator
    </ol>



    <h3>Usage:</h3>
    <ul>
        <pre class="example"><span class="keyword">for</span> name <span class="keyword">in</span> vis:<span class="function-name">register_names</span>() <span class="keyword">do</span>
	<span class="keyword">local</span> reg = vis.registers[name]
	<span class="keyword">for</span> i = <span class="number">1</span>, #reg <span class="keyword">do</span>
		<span class="comment">-- do something with register value reg[i]
</span>	<span class="keyword">end</span>
<span class="keyword">end</span></pre>
    </ul>

</dd>
    <dt>
    <a name = "vis:replace"></a>
    <strong>vis:replace(keys)</strong>
    </dt>
    <dd>
    Replace keys at all cursor positions of active window.
<p> This function behaves as if the keys were entered in replace mode,
 but in contrast to ??? it bypasses the input queue,
 meaning mappings do not apply and the keys will not be recorded in macros.



    <h3>Parameters:</h3>
    <ul>
        <li><span class="parameter">keys</span>
            <span class="types"><a class="type" href="https://www.lua.org/manual/5.1/manual.html#5.4">string</a></span>
         the keys to insert
        </li>
    </ul>



    <h3>See also:</h3>
    <ul>
    </ul>


</dd>
    <dt>
    <a name = "vis:textobject_new"></a>
    <strong>vis:textobject_new(key, textobject[, help])</strong>
    </dt>
    <dd>
    Map a new text object.
<p> Sets up a mapping in visual and operator pending mode.
 The text object function will receive the <a href="index.html#Class_Window">Window</a> and an initial
 position(in bytes from the start of the file) as argument and is
 expected to return the resulting range or `nil`.


    <h3>Parameters:</h3>
    <ul>
        <li><span class="parameter">key</span>
            <span class="types"><a class="type" href="https://www.lua.org/manual/5.1/manual.html#5.4">string</a></span>
         the key associated with the new text object
        </li>
        <li><span class="parameter">textobject</span>
            <span class="types"><span class="type">function</span></span>
         the text object logic implemented as Lua function
        </li>
        <li><span class="parameter">help</span>
            <span class="types"><a class="type" href="https://www.lua.org/manual/5.1/manual.html#5.4">string</a></span>
         the single line help text as displayed in `:help`
         (<em>optional</em>)
        </li>
    </ul>

    <h3>Returns:</h3>
    <ol>

           <span class="types"><span class="type">bool</span></span>
        whether the new text object could be installed
    </ol>



    <h3>Usage:</h3>
    <ul>
        <pre class="example">vis:<span class="function-name">textobject_new</span>(<span class="string">"&lt;C-l&gt;"</span>, <span class="keyword">function</span>(win, pos)
	<span class="keyword">return</span> pos, pos+<span class="number">1</span>
<span class="keyword">end</span>, <span class="string">"Single byte text object"</span>)</pre>
    </ul>

</dd>
    <dt>
    <a name = "vis:unmap"></a>
    <strong>vis:unmap(mode, key)</strong>
    </dt>
    <dd>
    Unmap a global key binding.


    <h3>Parameters:</h3>
    <ul>
        <li><span class="parameter">mode</span>
            <span class="types"><span class="type">int</span></span>
         the mode from which the mapping should be removed
        </li>
        <li><span class="parameter">key</span>
            <span class="types"><a class="type" href="https://www.lua.org/manual/5.1/manual.html#5.4">string</a></span>
         the mapping to remove
        </li>
    </ul>

    <h3>Returns:</h3>
    <ol>

           <span class="types"><span class="type">bool</span></span>
        whether the mapping was successfully removed
    </ol>


    <h3>See also:</h3>
    <ul>
    </ul>


</dd>
    <dt>
    <a name = "vis:windows"></a>
    <strong>vis:windows()</strong>
    </dt>
    <dd>
    Create an iterator over all windows.



    <h3>Returns:</h3>
    <ol>

        the new iterator
    </ol>


    <h3>See also:</h3>
    <ul>
         <a href="index.html#vis.win">vis.win</a>
    </ul>

    <h3>Usage:</h3>
    <ul>
        <pre class="example"><span class="keyword">for</span> win <span class="keyword">in</span> vis:<span class="function-name">windows</span>() <span class="keyword">do</span>
	<span class="comment">-- do something with win
</span><span class="keyword">end</span></pre>
    </ul>

</dd>
</dl>
    <h2 class="section-header has-description"><a name="Class_Ui"></a>Class Ui </h2>

          <div class="section-description">
          The user interface.
          </div>
    <dl class="function">
    <dt>
    <a name = "ui.colors"></a>
    <strong>ui.colors</strong>
    </dt>
    <dd>
    Number of available colors.


    <ul>
        <li><span class="parameter">colors</span>
            <span class="types"><span class="type">int</span></span>

        </li>
    </ul>





</dd>
    <dt>
    <a name = "ui.layout"></a>
    <strong>ui.layout</strong>
    </dt>
    <dd>
    Current layout.


    <ul>
        <li><span class="parameter">layout</span>
            <span class="types"><a class="type" href="index.html#layouts">layouts</a></span>
         current window layout.
        </li>
    </ul>





</dd>
</dl>
    <h2 class="section-header has-description"><a name="Class_Window"></a>Class Window </h2>

          <div class="section-description">
          A window object.
          </div>
    <dl class="function">
    <dt>
    <a name = "window.file"></a>
    <strong>window.file</strong>
    </dt>
    <dd>
    The file being displayed in this window.
 Changing the value to a file path will replace the current file with a new
 one for the specified path.


    <ul>
        <li><span class="parameter">file</span>
            <span class="types"><a class="type" href="index.html#Class_File">File</a></span>

        </li>
    </ul>





</dd>
    <dt>
    <a name = "window.height"></a>
    <strong>window.height</strong>
    </dt>
    <dd>
    The window height.


    <ul>
        <li><span class="parameter">height</span>
            <span class="types"><span class="type">int</span></span>

        </li>
    </ul>





</dd>
    <dt>
    <a name = "window.marks"></a>
    <strong>window.marks</strong>
    </dt>
    <dd>
    Window marks.
 Most of these marks are stored in the associated File object, meaning they
 are the same in all windows displaying the same file.


    <ul>
        <li><span class="parameter">marks</span>
         array to access the marks of this window by single letter name
        </li>
    </ul>



    <h3>See also:</h3>
    <ul>
    </ul>


</dd>
    <dt>
    <a name = "window.options"></a>
    <strong>window.options</strong>
    </dt>
    <dd>
    Window Options


    <h3>Fields:</h3>
    <ul>
        <li><span class="parameter">breakat</span>
            <span class="types"><a class="type" href="https://www.lua.org/manual/5.1/manual.html#5.4">string</a></span>
         {brk}
         (<em>default</em> "")
        </li>
        <li><span class="parameter">colorcolumn</span>
            <span class="types"><span class="type">int</span></span>
         {cc}
         (<em>default</em> 0)
        </li>
        <li><span class="parameter">cursorline</span>
            <span class="types"><span class="type">boolean</span></span>
         {cul}
         (<em>default</em> false)
        </li>
        <li><span class="parameter">expandtab</span>
            <span class="types"><span class="type">boolean</span></span>
         {et}
         (<em>default</em> false)
        </li>
        <li><span class="parameter">numbers</span>
            <span class="types"><span class="type">boolean</span></span>
         {nu}
         (<em>default</em> false)
        </li>
        <li><span class="parameter">relativenumbers</span>
            <span class="types"><span class="type">boolean</span></span>
         {rnu}
         (<em>default</em> false)
        </li>
        <li><span class="parameter">showeof</span>
            <span class="types"><span class="type">boolean</span></span>

         (<em>default</em> true)
        </li>
        <li><span class="parameter">shownewlines</span>
            <span class="types"><span class="type">boolean</span></span>

         (<em>default</em> false)
        </li>
        <li><span class="parameter">showspaces</span>
            <span class="types"><span class="type">boolean</span></span>

         (<em>default</em> false)
        </li>
        <li><span class="parameter">showtabs</span>
            <span class="types"><span class="type">boolean</span></span>

         (<em>default</em> false)
        </li>
        <li><span class="parameter">statusbar</span>
            <span class="types"><span class="type">boolean</span></span>

         (<em>default</em> true)
        </li>
        <li><span class="parameter">tabwidth</span>
            <span class="types"><span class="type">int</span></span>
         {tw}
         (<em>default</em> 8)
        </li>
        <li><span class="parameter">wrapcolumn</span>
            <span class="types"><span class="type">int</span></span>
         {wc}
         (<em>default</em> 0)
        </li>
    </ul>



    <h3>See also:</h3>
    <ul>
    </ul>


</dd>
    <dt>
    <a name = "window.selection"></a>
    <strong>window.selection</strong>
    </dt>
    <dd>
    The primary selection of this window.


    <ul>
        <li><span class="parameter">selection</span>
            <span class="types"><a class="type" href="index.html#Class_Selection">Selection</a></span>

        </li>
    </ul>





</dd>
    <dt>
    <a name = "window.selections"></a>
    <strong>window.selections</strong>
    </dt>
    <dd>
    The selections of this window.


    <ul>
        <li><span class="parameter">selections</span>
            <span class="types"><span class="type">Array(Selection)</span></span>

        </li>
    </ul>





</dd>
    <dt>
    <a name = "window.syntax"></a>
    <strong>window.syntax</strong>
    </dt>
    <dd>
    The file type associated with this window.


    <ul>
        <li><span class="parameter">syntax</span>
            <span class="types"><a class="type" href="https://www.lua.org/manual/5.1/manual.html#5.4">string</a></span>
         the syntax lexer name or `nil` if unset
        </li>
    </ul>





</dd>
    <dt>
    <a name = "window.viewport"></a>
    <strong>window.viewport</strong>
    </dt>
    <dd>
    Viewport currently being displayed.
 Changing these values will not move the viewport.


    <h3>Fields:</h3>
    <ul>
        <li><span class="parameter">bytes</span>
            <span class="types"><a class="type" href="index.html#Class_Range">Range</a></span>
         file bytes, from 0, at the start and end of the viewport
        </li>
        <li><span class="parameter">lines</span>
            <span class="types"><a class="type" href="index.html#Class_Range">Range</a></span>
         file lines, from 1, at the top and bottom of the viewport
        </li>
        <li><span class="parameter">height</span>
            <span class="types"><span class="type">int</span></span>
         lines in viewport, accounting for window decoration
        </li>
        <li><span class="parameter">width</span>
            <span class="types"><span class="type">int</span></span>
         columns in viewport, accounting for window decoration
        </li>
    </ul>





</dd>
    <dt>
    <a name = "window.width"></a>
    <strong>window.width</strong>
    </dt>
    <dd>
    The window width.


    <ul>
        <li><span class="parameter">width</span>
            <span class="types"><span class="type">int</span></span>

        </li>
    </ul>





</dd>
    <dt>
    <a name = "window:close"></a>
    <strong>window:close(force)</strong>
    </dt>
    <dd>
    Close window.
<p> After a successful call the Window reference becomes invalid and
 must no longer be used. Attempting to close the last window will
 always fail.



    <h3>Parameters:</h3>
    <ul>
        <li><span class="parameter">force</span>
            <span class="types"><span class="type">bool</span></span>
         whether unsaved changes should be discarded
        </li>
    </ul>

    <h3>Returns:</h3>
    <ol>

           <span class="types"><span class="type">bool</span></span>
        whether the window was closed
    </ol>


    <h3>See also:</h3>
    <ul>
         <a href="index.html#vis:exit">exit</a>
    </ul>


</dd>
    <dt>
    <a name = "window:draw"></a>
    <strong>window:draw()</strong>
    </dt>
    <dd>
    Redraw window content.







</dd>
    <dt>
    <a name = "window:map"></a>
    <strong>window:map(...)</strong>
    </dt>
    <dd>
    Set up a window local key mapping.
 The function signatures are the same as for ???.


    <h3>Parameters:</h3>
    <ul>
        <li><span class="parameter">...</span>

        </li>
    </ul>



    <h3>See also:</h3>
    <ul>
    </ul>


</dd>
    <dt>
    <a name = "window:selections_iterator"></a>
    <strong>window:selections_iterator()</strong>
    </dt>
    <dd>
    Create an iterator over all selections of this window.



    <h3>Returns:</h3>
    <ol>

        the new iterator
    </ol>




</dd>
    <dt>
    <a name = "window:set_syntax"></a>
    <strong>window:set_syntax(syntax)</strong>
    </dt>
    <dd>
    Change syntax lexer to use for this window


    <h3>Parameters:</h3>
    <ul>
        <li><span class="parameter">syntax</span>
            <span class="types"><a class="type" href="https://www.lua.org/manual/5.1/manual.html#5.4">string</a></span>
         the syntax lexer name or `nil` to disable syntax highlighting
        </li>
    </ul>

    <h3>Returns:</h3>
    <ol>

           <span class="types"><span class="type">bool</span></span>
        whether the lexer could be changed
    </ol>




</dd>
    <dt>
    <a name = "window:status"></a>
    <strong>window:status(left[, right])</strong>
    </dt>
    <dd>
    Set window status line.


    <h3>Parameters:</h3>
    <ul>
        <li><span class="parameter">left</span>
            <span class="types"><a class="type" href="https://www.lua.org/manual/5.1/manual.html#5.4">string</a></span>
         the left aligned part of the status line
        </li>
        <li><span class="parameter">right</span>
            <span class="types"><a class="type" href="https://www.lua.org/manual/5.1/manual.html#5.4">string</a></span>
         the right aligned part of the status line
         (<em>optional</em>)
        </li>
    </ul>





</dd>
    <dt>
    <a name = "window:style"></a>
    <strong>window:style(id, start, finish[, keep_non_default])</strong>
    </dt>
    <dd>
    Style a window range.
<p> The style will be cleared after every window redraw.


    <h3>Parameters:</h3>
    <ul>
        <li><span class="parameter">id</span>
            <span class="types"><span class="type">int</span></span>
         the display style as registered with <a href="index.html#window:style_define">style_define</a>
        </li>
        <li><span class="parameter">start</span>
            <span class="types"><span class="type">int</span></span>
         the absolute file position in bytes
        </li>
        <li><span class="parameter">finish</span>
            <span class="types"><span class="type">int</span></span>
         the end position
        </li>
        <li><span class="parameter">keep_non_default</span>
            <span class="types"><span class="type">bool</span></span>
         whether non-default style values should be kept
         (<em>optional</em>)
        </li>
    </ul>



    <h3>See also:</h3>
    <ul>
         <a href="index.html#window:style_define">style_define</a>
    </ul>

    <h3>Usage:</h3>
    <ul>
        <pre class="example">win:<span class="function-name">style</span>(win.STYLE_DEFAULT, <span class="number">0</span>, <span class="number">10</span>)</pre>
    </ul>

</dd>
    <dt>
    <a name = "window:style_define"></a>
    <strong>window:style_define(id, style)</strong>
    </dt>
    <dd>
    Define a display style.


    <h3>Parameters:</h3>
    <ul>
        <li><span class="parameter">id</span>
            <span class="types"><span class="type">int</span></span>
         the style id to use
        </li>
        <li><span class="parameter">style</span>
            <span class="types"><a class="type" href="https://www.lua.org/manual/5.1/manual.html#5.4">string</a></span>
         the style definition
        </li>
    </ul>

    <h3>Returns:</h3>
    <ol>

           <span class="types"><span class="type">bool</span></span>
        whether the style definition has been successfully
  associated with the given id
    </ol>


    <h3>See also:</h3>
    <ul>
         <a href="index.html#window:style">style</a>
    </ul>

    <h3>Usage:</h3>
    <ul>
        <pre class="example">win:<span class="function-name">style_define</span>(win.STYLE_DEFAULT, <span class="string">"fore:red"</span>)</pre>
    </ul>

</dd>
    <dt>
    <a name = "window:style_pos"></a>
    <strong>window:style_pos(id, x, y[, keep_non_default])</strong>
    </dt>
    <dd>
    Style the single terminal cell at the given coordinates, relative to this window.
<p> Completely independent of the file buffer, and can be used to style UI elements,
 such as the status bar.
 The style will be cleared after every window redraw.


    <h3>Parameters:</h3>
    <ul>
        <li><span class="parameter">id</span>
            <span class="types"><span class="type">int</span></span>
         display style registered with <a href="index.html#window:style_define">style_define</a>
        </li>
        <li><span class="parameter">x</span>
            <span class="types"><span class="type">int</span></span>
         0-based x coordinate within Win, where (0,0) is the top left corner
        </li>
        <li><span class="parameter">y</span>
            <span class="types"><span class="type">int</span></span>
         See above
        </li>
        <li><span class="parameter">keep_non_default</span>
            <span class="types"><span class="type">bool</span></span>
         whether non-default style values should be kept
         (<em>optional</em>)
        </li>
    </ul>

    <h3>Returns:</h3>
    <ol>

           <span class="types"><span class="type">bool</span></span>
        false if the coordinates would be outside the window's dimensions
    </ol>


    <h3>See also:</h3>
    <ul>
         <a href="index.html#window:style_define">style_define</a>
    </ul>

    <h3>Usage:</h3>
    <ul>
        <pre class="example">win:<span class="function-name">style_pos</span>(win.STYLE_COLOR_COLUMN, <span class="number">0</span>, win.height - <span class="number">1</span>)
<span class="comment">-- Styles the first character of the status bar (or the last line, if disabled)</span></pre>
    </ul>

</dd>
    <dt>
    <a name = "window:unmap"></a>
    <strong>window:unmap(...)</strong>
    </dt>
    <dd>
    Remove a window local key mapping.
 The function signature is the same as for ???.


    <h3>Parameters:</h3>
    <ul>
        <li><span class="parameter">...</span>

        </li>
    </ul>



    <h3>See also:</h3>
    <ul>
    </ul>


</dd>
</dl>
    <h2 class="section-header has-description"><a name="Class_Selection"></a>Class Selection </h2>

          <div class="section-description">
          A selection object.
<p> A selection is a non-empty, directed range with two endpoints called
 *cursor* and *anchor*. A selection can be anchored in which case
 the anchor remains fixed while only the position of the cursor is
 adjusted. For non-anchored selections both endpoints are updated. A
 singleton selection covers one character on which both cursor and
 anchor reside. There always exists a primary selection which remains
 visible (i.e. changes to its position will adjust the viewport).
<p> The range covered by a selection is represented as an interval whose
 endpoints are absolute byte offsets from the start of the file.
 Valid addresses are within the closed interval `[0, file.size]`.
<p> Selections are currently implemented using character marks into
 the underlying persistent
 [text management data structure](https://github.com/martanne/vis/wiki/Text-management-using-a-piece-chain).
<p> This has a few consequences you should be aware of:
<p>  - A selection becomes invalid when the delimiting boundaries of the underlying
    text it is referencing is deleted:
<p>        -- leaves selection in an invalid state
        win.file:delete(win.selection.pos, 1)
        assert(win.selection.pos == nil)
<p>    Like a regular mark it will become valid again when the text is reverted
    to the state before the deletion.
<p>  - Inserts after the selection position (`> selection.pos`) will not affect the
    selection position.
<p>        local pos = win.selection.pos
        win.file:insert(pos+1, "-")
        assert(win.selection.pos == pos)
<p>  - Non-cached inserts before the selection position (`<= selection.pos`) will
    affect the mark and adjust the selection position by the number of bytes
    which were inserted.
<p>        local pos = win.selection.pos
        win.file:insert(pos, "-")
        assert(win.selection.pos == pos+1)
<p>  - Cached inserts before the selection position (`<= selection.pos`) will
    not affect the selection position because the underlying text is replaced
    inplace.
<p> For these reasons it is generally recommended to update the selection position
 after a modification. The general procedure amounts to:
<p> 1. Read out the current selection position
 2. Perform text modifications
 3. Update the selection position
<p> This is what ??? and ??? do internally.

          </div>
            <h3>Usage:</h3>
            <pre class="example"><span class="keyword">local</span> data = <span class="string">"new text"</span>
<span class="keyword">local</span> pos = win.selection.pos
win.file:<span class="function-name">insert</span>(pos, data)
win.selection.pos = pos + #data</pre>
    <dl class="function">
    <dt>
    <a name = "selection.anchored"></a>
    <strong>selection.anchored</strong>
    </dt>
    <dd>
    Whether this selection is anchored.


    <ul>
        <li><span class="parameter">anchored</span>
            <span class="types"><span class="type">bool</span></span>

        </li>
    </ul>





</dd>
    <dt>
    <a name = "selection.col"></a>
    <strong>selection.col</strong>
    </dt>
    <dd>
    The 1-based column position the cursor of this selection resides on.


    <ul>
        <li><span class="parameter">col</span>
            <span class="types"><span class="type">int</span></span>

        </li>
    </ul>



    <h3>See also:</h3>
    <ul>
         <a href="index.html#selection:to">to</a>
    </ul>


</dd>
    <dt>
    <a name = "selection.line"></a>
    <strong>selection.line</strong>
    </dt>
    <dd>
    The 1-based line the cursor of this selection resides on.


    <ul>
        <li><span class="parameter">line</span>
            <span class="types"><span class="type">int</span></span>

        </li>
    </ul>



    <h3>See also:</h3>
    <ul>
         <a href="index.html#selection:to">to</a>
    </ul>


</dd>
    <dt>
    <a name = "selection.number"></a>
    <strong>selection.number</strong>
    </dt>
    <dd>
    The 1-based selection index.


    <ul>
        <li><span class="parameter">number</span>
            <span class="types"><span class="type">int</span></span>

        </li>
    </ul>





</dd>
    <dt>
    <a name = "selection.pos"></a>
    <strong>selection.pos</strong>
    </dt>
    <dd>
    The zero based byte position in the file.
<p> Might be `nil` if the selection is in an invalid state.
 Setting this field will move the cursor endpoint of the
 selection to the given position.


    <ul>
        <li><span class="parameter">pos</span>
            <span class="types"><span class="type">int</span></span>

        </li>
    </ul>





</dd>
    <dt>
    <a name = "selection.range"></a>
    <strong>selection.range</strong>
    </dt>
    <dd>
    The range covered by this selection.


    <ul>
        <li><span class="parameter">range</span>
            <span class="types"><a class="type" href="index.html#Class_Range">Range</a></span>

        </li>
    </ul>





</dd>
    <dt>
    <a name = "selection:remove"></a>
    <strong>selection:remove()</strong>
    </dt>
    <dd>
    Remove selection.







</dd>
    <dt>
    <a name = "selection:to"></a>
    <strong>selection:to(line, col)</strong>
    </dt>
    <dd>
    Move cursor of selection.


    <h3>Parameters:</h3>
    <ul>
        <li><span class="parameter">line</span>
            <span class="types"><span class="type">int</span></span>
         the 1-based line number
        </li>
        <li><span class="parameter">col</span>
            <span class="types"><span class="type">int</span></span>
         the 1-based column number
        </li>
    </ul>





</dd>
</dl>
    <h2 class="section-header has-description"><a name="Class_File"></a>Class File </h2>

          <div class="section-description">
          A file object.
          </div>
    <dl class="function">
    <dt>
    <a name = "file.lines"></a>
    <strong>file.lines</strong>
    </dt>
    <dd>
    File content by logical lines.
<p> Assigning to array element `0` (`#lines+1`) will insert a new line at
 the beginning (end) of the file.


    <ul>
        <li><span class="parameter">lines</span>
            <span class="types"><span class="type">Array(string)</span></span>
         the file content accessible as 1-based array
        </li>
    </ul>



    <h3>See also:</h3>
    <ul>
         <a href="index.html#file:content">content</a>
    </ul>

    <h3>Usage:</h3>
    <ul>
        <pre class="example"><span class="keyword">local</span> lines = vis.win.file.lines
<span class="keyword">for</span> i=<span class="number">1</span>, #lines <span class="keyword">do</span>
	lines[i] = i .. <span class="string">": "</span> .. lines[i]
<span class="keyword">end</span></pre>
    </ul>

</dd>
    <dt>
    <a name = "file.modified"></a>
    <strong>file.modified</strong>
    </dt>
    <dd>
    File state.


    <ul>
        <li><span class="parameter">modified</span>
            <span class="types"><span class="type">bool</span></span>
         whether the file contains unsaved changes
        </li>
    </ul>





</dd>
    <dt>
    <a name = "file.name"></a>
    <strong>file.name</strong>
    </dt>
    <dd>
    File name.


    <ul>
        <li><span class="parameter">name</span>
            <span class="types"><a class="type" href="https://www.lua.org/manual/5.1/manual.html#5.4">string</a></span>
         the file name relative to current working directory or `nil` if not yet named
        </li>
    </ul>





</dd>
    <dt>
    <a name = "file.path"></a>
    <strong>file.path</strong>
    </dt>
    <dd>
    File path.


    <ul>
        <li><span class="parameter">path</span>
            <span class="types"><a class="type" href="https://www.lua.org/manual/5.1/manual.html#5.4">string</a></span>
         the absolute file path or `nil` if not yet named
        </li>
    </ul>





</dd>
    <dt>
    <a name = "file.permission"></a>
    <strong>file.permission</strong>
    </dt>
    <dd>
    File permission.


    <ul>
        <li><span class="parameter">permission</span>
            <span class="types"><span class="type">int</span></span>
         the file permission bits as of the most recent load/save
        </li>
    </ul>





</dd>
    <dt>
    <a name = "file.savemethod"></a>
    <strong>file.savemethod</strong>
    </dt>
    <dd>
    File save method


    <ul>
        <li><span class="parameter">savemethod</span>
            <span class="types"><a class="type" href="https://www.lua.org/manual/5.1/manual.html#5.4">string</a></span>
         `"auto"`, `"atomic"`, or `"inplace"`.
         (<em>default</em> "auto")
        </li>
    </ul>





</dd>
    <dt>
    <a name = "file.size"></a>
    <strong>file.size</strong>
    </dt>
    <dd>
    File size in bytes.


    <ul>
        <li><span class="parameter">size</span>
            <span class="types"><span class="type">int</span></span>
         the current file size in bytes
        </li>
    </ul>





</dd>
    <dt>
    <a name = "file:content"></a>
    <strong>file:content(range)</strong>
    </dt>
    <dd>
    Get file content of range.


    <h3>Parameters:</h3>
    <ul>
        <li><span class="parameter">range</span>
            <span class="types"><a class="type" href="index.html#Class_Range">Range</a></span>
         the range to read
        </li>
    </ul>

    <h3>Returns:</h3>
    <ol>

           <span class="types"><a class="type" href="https://www.lua.org/manual/5.1/manual.html#5.4">string</a></span>
        the file content corresponding to the range
    </ol>




</dd>
    <dt>
    <a name = "file:content"></a>
    <strong>file:content(pos, len)</strong>
    </dt>
    <dd>
    Get file content of position and length.


    <h3>Parameters:</h3>
    <ul>
        <li><span class="parameter">pos</span>
            <span class="types"><span class="type">int</span></span>
         the 0-based file position in bytes
        </li>
        <li><span class="parameter">len</span>
            <span class="types"><span class="type">int</span></span>
         the length in bytes to read
        </li>
    </ul>

    <h3>Returns:</h3>
    <ol>

           <span class="types"><a class="type" href="https://www.lua.org/manual/5.1/manual.html#5.4">string</a></span>
        the file content corresponding to the range
    </ol>


    <h3>See also:</h3>
    <ul>
         <a href="index.html#file.lines">lines</a>
    </ul>

    <h3>Usage:</h3>
    <ul>
        <pre class="example"><span class="keyword">local</span> file = vis.win.file
<span class="keyword">local</span> text = file:<span class="function-name">content</span>(<span class="number">0</span>, file.size)</pre>
    </ul>

</dd>
    <dt>
    <a name = "file:delete"></a>
    <strong>file:delete(range)</strong>
    </dt>
    <dd>
    Delete file range.


    <h3>Parameters:</h3>
    <ul>
        <li><span class="parameter">range</span>
            <span class="types"><a class="type" href="index.html#Class_Range">Range</a></span>
         the range to delete
        </li>
    </ul>

    <h3>Returns:</h3>
    <ol>

           <span class="types"><span class="type">bool</span></span>
        whether the file content was successfully changed
    </ol>




</dd>
    <dt>
    <a name = "file:delete"></a>
    <strong>file:delete(pos, len)</strong>
    </dt>
    <dd>
    Delete data at position.


    <h3>Parameters:</h3>
    <ul>
        <li><span class="parameter">pos</span>
            <span class="types"><span class="type">int</span></span>
         the 0-based file position in bytes
        </li>
        <li><span class="parameter">len</span>
            <span class="types"><span class="type">int</span></span>
         the length in bytes to delete
        </li>
    </ul>

    <h3>Returns:</h3>
    <ol>

           <span class="types"><span class="type">bool</span></span>
        whether the file content was successfully changed
    </ol>




</dd>
    <dt>
    <a name = "file:insert"></a>
    <strong>file:insert(pos, data)</strong>
    </dt>
    <dd>
    Insert data at position.


    <h3>Parameters:</h3>
    <ul>
        <li><span class="parameter">pos</span>
            <span class="types"><span class="type">int</span></span>
         the 0-based file position in bytes
        </li>
        <li><span class="parameter">data</span>
            <span class="types"><a class="type" href="https://www.lua.org/manual/5.1/manual.html#5.4">string</a></span>
         the data to insert
        </li>
    </ul>

    <h3>Returns:</h3>
    <ol>

           <span class="types"><span class="type">bool</span></span>
        whether the file content was successfully changed
    </ol>




</dd>
    <dt>
    <a name = "file:lines_iterator"></a>
    <strong>file:lines_iterator()</strong>
    </dt>
    <dd>
    Create an iterator over all lines of the file.
<p> For large files this is probably faster than <a href="index.html#file.lines">lines</a>.



    <h3>Returns:</h3>
    <ol>

        the new iterator
    </ol>


    <h3>See also:</h3>
    <ul>
         <a href="index.html#file.lines">lines</a>
    </ul>

    <h3>Usage:</h3>
    <ul>
        <pre class="example"><span class="keyword">for</span> line <span class="keyword">in</span> file:<span class="function-name">lines_iterator</span>() <span class="keyword">do</span>
	<span class="comment">-- do something with line
</span><span class="keyword">end</span></pre>
    </ul>

</dd>
    <dt>
    <a name = "file:mark_get"></a>
    <strong>file:mark_get(mark)</strong>
    </dt>
    <dd>
    Get position of mark.


    <h3>Parameters:</h3>
    <ul>
        <li><span class="parameter">mark</span>
            <span class="types"><span class="type">Mark</span></span>
         the mark to look up
        </li>
    </ul>

    <h3>Returns:</h3>
    <ol>

           <span class="types"><span class="type">int</span></span>
        pos the position of the mark, or `nil` if invalid
    </ol>




</dd>
    <dt>
    <a name = "file:mark_set"></a>
    <strong>file:mark_set(pos)</strong>
    </dt>
    <dd>
    Set mark.


    <h3>Parameters:</h3>
    <ul>
        <li><span class="parameter">pos</span>
            <span class="types"><span class="type">int</span></span>
         the position to set the mark to, must be in [0, file.size]
        </li>
    </ul>

    <h3>Returns:</h3>
    <ol>

           <span class="types"><span class="type">Mark</span></span>
        mark the mark which can be looked up later
    </ol>




</dd>
    <dt>
    <a name = "file:match_at"></a>
    <strong>file:match_at(pattern, pos[, horizon])</strong>
    </dt>
    <dd>
    Check whether LPeg pattern matches at a given file position.


    <h3>Parameters:</h3>
    <ul>
        <li><span class="parameter">pattern</span>
         the LPeg pattern
        </li>
        <li><span class="parameter">pos</span>
            <span class="types"><span class="type">int</span></span>
         the absolute file position which should be tested for a match
        </li>
        <li><span class="parameter">horizon</span>
            <span class="types"><span class="type">int</span></span>
         the number of bytes around `pos` to consider (defaults to 1K)
         (<em>optional</em>)
        </li>
    </ul>

    <h3>Returns:</h3>
    <ol>

           <span class="types"><span class="type">int</span></span>
        start,end the range of the matched region or `nil`
    </ol>




</dd>
    <dt>
    <a name = "file:snapshot"></a>
    <strong>file:snapshot()</strong>
    </dt>
    <dd>
    Create a restore point for undo/redo.







</dd>
    <dt>
    <a name = "file:text_object_longword"></a>
    <strong>file:text_object_longword(pos)</strong>
    </dt>
    <dd>
    WORD text object.


    <h3>Parameters:</h3>
    <ul>
        <li><span class="parameter">pos</span>
            <span class="types"><span class="type">int</span></span>
         the position which must be part of the word
        </li>
    </ul>

    <h3>Returns:</h3>
    <ol>

           <span class="types"><a class="type" href="index.html#Class_Range">Range</a></span>
        range the range
    </ol>




</dd>
    <dt>
    <a name = "file:text_object_word"></a>
    <strong>file:text_object_word(pos)</strong>
    </dt>
    <dd>
    Word text object.


    <h3>Parameters:</h3>
    <ul>
        <li><span class="parameter">pos</span>
            <span class="types"><span class="type">int</span></span>
         the position which must be part of the word
        </li>
    </ul>

    <h3>Returns:</h3>
    <ol>

           <span class="types"><a class="type" href="index.html#Class_Range">Range</a></span>
        range the range
    </ol>




</dd>
</dl>
    <h2 class="section-header has-description"><a name="Class_Range"></a>Class Range </h2>

          <div class="section-description">
          A file range.
<p> For a valid range `start <= finish` holds.
 An invalid range is represented as `nil`.
          </div>
    <dl class="function">
    <dt>
    <a name = "range.finish"></a>
    <strong>range.finish</strong>
    </dt>
    <dd>
    The end of the range.


    <ul>
        <li><span class="parameter">finish</span>
            <span class="types"><span class="type">int</span></span>

        </li>
    </ul>





</dd>
    <dt>
    <a name = "range.start"></a>
    <strong>range.start</strong>
    </dt>
    <dd>
    The beginning of the range.


    <ul>
        <li><span class="parameter">start</span>
            <span class="types"><span class="type">int</span></span>

        </li>
    </ul>





</dd>
</dl>
    <h2 class="section-header "><a name="Layouts"></a>Layouts </h2>

    <dl class="function">
    <dt>
    <a name = "layouts"></a>
    <strong>layouts</strong>
    </dt>
    <dd>
    Layout Constants.


    <h3>Fields:</h3>
    <ul>
        <li><span class="parameter">HORIZONTAL</span>
            <span class="types"><span class="type">int</span></span>

        </li>
        <li><span class="parameter">VERTICAL</span>
            <span class="types"><span class="type">int</span></span>

        </li>
    </ul>





</dd>
</dl>
    <h2 class="section-header "><a name="Modes"></a>Modes </h2>

    <dl class="function">
    <dt>
    <a name = "modes"></a>
    <strong>modes</strong>
    </dt>
    <dd>
    Mode constants.


    <h3>Fields:</h3>
    <ul>
        <li><span class="parameter">NORMAL</span>
            <span class="types"><span class="type">int</span></span>

        </li>
        <li><span class="parameter">OPERATOR_PENDING</span>
            <span class="types"><span class="type">int</span></span>

        </li>
        <li><span class="parameter">INSERT</span>
            <span class="types"><span class="type">int</span></span>

        </li>
        <li><span class="parameter">REPLACE</span>
            <span class="types"><span class="type">int</span></span>

        </li>
        <li><span class="parameter">VISUAL</span>
            <span class="types"><span class="type">int</span></span>

        </li>
        <li><span class="parameter">VISUAL_LINE</span>
            <span class="types"><span class="type">int</span></span>

        </li>
    </ul>



    <h3>See also:</h3>
    <ul>
    </ul>


</dd>
</dl>
    <h2 class="section-header has-description"><a name="Key_Handling"></a>Key Handling </h2>

          <div class="section-description">

<p> This section describes the contract between the editor core and Lua
 key handling functions mapped to symbolic keys using either ???
 or ???.

          </div>
    <dl class="function">
    <dt>
    <a name = "keyhandler"></a>
    <strong>keyhandler(keys)</strong>
    </dt>
    <dd>
    Example of a key handling function.
<p> The keyhandler is invoked with the pending content of the input queue
 given as argument. This might be the empty string if no further input
 is available.
<p> The function is expected to return the number of *bytes* it has
 consumed from the passed input keys. A negative return value is
 interpreted as an indication that not enough input was available. The
 function will be called again once the user has provided more input. A
 missing return value (i.e. `nil`) is interpreted as zero, meaning
 no further input was consumed but the function completed successfully.



    <h3>Parameters:</h3>
    <ul>
        <li><span class="parameter">keys</span>
            <span class="types"><a class="type" href="https://www.lua.org/manual/5.1/manual.html#5.4">string</a></span>
         the keys following the mapping
        </li>
    </ul>

    <h3>Returns:</h3>
    <ol>

           <span class="types"><span class="type">int</span></span>
        the number of *bytes* being consumed by the function (see above)
    </ol>


    <h3>See also:</h3>
    <ul>
    </ul>

    <h3>Usage:</h3>
    <ul>
        <pre class="example">vis:<span class="function-name">map</span>(vis.modes.INSERT, <span class="string">"&lt;C-k&gt;"</span>, <span class="keyword">function</span>(keys)
	<span class="keyword">if</span> #keys &lt; <span class="number">2</span> <span class="keyword">then</span>
		<span class="keyword">return</span> -<span class="number">1</span> <span class="comment">-- need more input
</span>	<span class="keyword">end</span>
	<span class="keyword">local</span> digraph = keys:<span class="function-name">sub</span>(<span class="number">1</span>, <span class="number">2</span>)
	<span class="keyword">if</span> digraph == <span class="string">"l*"</span> <span class="keyword">then</span>
		vis:<span class="function-name">feedkeys</span>(<span class="string">'λ'</span>)
		<span class="keyword">return</span> <span class="number">2</span> <span class="comment">-- consume 2 bytes of input
</span>	<span class="keyword">end</span>
<span class="keyword">end</span>, <span class="string">"Insert digraph"</span>)</pre>
    </ul>

</dd>
</dl>
    <h2 class="section-header has-description"><a name="Core_Events"></a>Core Events </h2>

          <div class="section-description">

<p> These events are invoked from the editor core.
 The following functions are invoked if they are registered in the
 `vis.events` table. Users scripts should generally use the [Events](#events)
 mechanism instead which multiplexes these core events.

          </div>
    <dl class="function">
    <dt>
    <a name = "file_close"></a>
    <strong>file_close(file)</strong>
    </dt>
    <dd>
    File close.
 The last window displaying the file has been closed.


    <h3>Parameters:</h3>
    <ul>
        <li><span class="parameter">file</span>
            <span class="types"><a class="type" href="index.html#Class_File">File</a></span>
         the file being closed
        </li>
    </ul>





</dd>
    <dt>
    <a name = "file_open"></a>
    <strong>file_open(file)</strong>
    </dt>
    <dd>
    File open.


    <h3>Parameters:</h3>
    <ul>
        <li><span class="parameter">file</span>
            <span class="types"><a class="type" href="index.html#Class_File">File</a></span>
         the file to be opened
        </li>
    </ul>





</dd>
    <dt>
    <a name = "file_save_post"></a>
    <strong>file_save_post(file, path)</strong>
    </dt>
    <dd>
    File post save.
 Triggered *after* a successful write operation.


    <h3>Parameters:</h3>
    <ul>
        <li><span class="parameter">file</span>
            <span class="types"><a class="type" href="index.html#Class_File">File</a></span>
         the file which was written
        </li>
        <li><span class="parameter">path</span>
            <span class="types"><a class="type" href="https://www.lua.org/manual/5.1/manual.html#5.4">string</a></span>
         the absolute path to which it was written, `nil` if standard output
        </li>
    </ul>





</dd>
    <dt>
    <a name = "file_save_pre"></a>
    <strong>file_save_pre(file, path)</strong>
    </dt>
    <dd>
    File pre save.
 Triggered *before* the file is being written.


    <h3>Parameters:</h3>
    <ul>
        <li><span class="parameter">file</span>
            <span class="types"><a class="type" href="index.html#Class_File">File</a></span>
         the file being written
        </li>
        <li><span class="parameter">path</span>
            <span class="types"><a class="type" href="https://www.lua.org/manual/5.1/manual.html#5.4">string</a></span>
         the absolute path to which the file will be written, `nil` if standard output
        </li>
    </ul>

    <h3>Returns:</h3>
    <ol>

           <span class="types"><span class="type">bool</span></span>
        whether the write operation should be proceeded
    </ol>




</dd>
    <dt>
    <a name = "init"></a>
    <strong>init()</strong>
    </dt>
    <dd>
    Editor initialization completed.
 This event is emitted immediately after `visrc.lua` has been sourced, but
 before any other events have occurred, in particular the command line arguments
 have not yet been processed.
<p> Can be used to set *global* configuration options.







</dd>
    <dt>
    <a name = "input"></a>
    <strong>input(key)</strong>
    </dt>
    <dd>
    Input key event in either input or replace mode.


    <h3>Parameters:</h3>
    <ul>
        <li><span class="parameter">key</span>
            <span class="types"><a class="type" href="https://www.lua.org/manual/5.1/manual.html#5.4">string</a></span>

        </li>
    </ul>

    <h3>Returns:</h3>
    <ol>

           <span class="types"><span class="type">bool</span></span>
        whether the key was consumed or not
    </ol>




</dd>
    <dt>
    <a name = "process_response"></a>
    <strong>process_response(name, response_type, code, buffer)</strong>
    </dt>
    <dd>
    The response received from the process started via ???.


    <h3>Parameters:</h3>
    <ul>
        <li><span class="parameter">name</span>
            <span class="types"><a class="type" href="https://www.lua.org/manual/5.1/manual.html#5.4">string</a></span>
         the name of process given to ???
        </li>
        <li><span class="parameter">response_type</span>
            <span class="types"><a class="type" href="https://www.lua.org/manual/5.1/manual.html#5.4">string</a></span>
         can be "STDOUT" or "STDERR" if new output was received in corresponding channel, "SIGNAL" if the process was terminated by a signal or "EXIT" when the process terminated normally
        </li>
        <li><span class="parameter">code</span>
            <span class="types"><span class="type">int</span></span>
         the exit code number if response_type is "EXIT", or the signal number if response_type is "SIGNAL"
        </li>
        <li><span class="parameter">buffer</span>
            <span class="types"><a class="type" href="https://www.lua.org/manual/5.1/manual.html#5.4">string</a></span>
         the available content sent by the process
        </li>
    </ul>





</dd>
    <dt>
    <a name = "quit"></a>
    <strong>quit()</strong>
    </dt>
    <dd>
    Editor is about to terminate.







</dd>
    <dt>
    <a name = "start"></a>
    <strong>start()</strong>
    </dt>
    <dd>
    Editor startup completed.
 This event is emitted immediately before the main loop starts.
 At this point all files are loaded and corresponding windows are created.
 We are about to process interactive keyboard input.







</dd>
    <dt>
    <a name = "term_csi"></a>
    <strong>term_csi(List)</strong>
    </dt>
    <dd>
    CSI command received from terminal.


    <h3>Parameters:</h3>
    <ul>
        <li><span class="parameter">List</span>
         of CSI parameters
        </li>
    </ul>





</dd>
    <dt>
    <a name = "ui_draw"></a>
    <strong>ui_draw()</strong>
    </dt>
    <dd>
    Emitted immediately before the UI is drawn to the screen.
 Allows last-minute overrides to the styling of UI elements.
<p> *WARNING:* This is emitted every screen draw!
 Use sparingly and check for `nil` values!







</dd>
    <dt>
    <a name = "win_close"></a>
    <strong>win_close(win)</strong>
    </dt>
    <dd>
    Window close.
 An window is being closed.


    <h3>Parameters:</h3>
    <ul>
        <li><span class="parameter">win</span>
            <span class="types"><a class="type" href="index.html#Class_Window">Window</a></span>
         the window being closed
        </li>
    </ul>





</dd>
    <dt>
    <a name = "win_highlight"></a>
    <strong>win_highlight(win)</strong>
    </dt>
    <dd>
    Window highlight.
 The window has been redrawn and the syntax highlighting needs to be performed.


    <h3>Parameters:</h3>
    <ul>
        <li><span class="parameter">win</span>
            <span class="types"><a class="type" href="index.html#Class_Window">Window</a></span>
         the window being redrawn
        </li>
    </ul>



    <h3>See also:</h3>
    <ul>
         <a href="index.html#window:style">style</a>
    </ul>


</dd>
    <dt>
    <a name = "win_open"></a>
    <strong>win_open(win)</strong>
    </dt>
    <dd>
    Window open.
 A new window has been created.


    <h3>Parameters:</h3>
    <ul>
        <li><span class="parameter">win</span>
            <span class="types"><a class="type" href="index.html#Class_Window">Window</a></span>
         the window being opened
        </li>
    </ul>





</dd>
    <dt>
    <a name = "win_status"></a>
    <strong>win_status(win)</strong>
    </dt>
    <dd>
    Window status bar redraw.


    <h3>Parameters:</h3>
    <ul>
        <li><span class="parameter">win</span>
            <span class="types"><a class="type" href="index.html#Class_Window">Window</a></span>
         the affected window
        </li>
    </ul>



    <h3>See also:</h3>
    <ul>
         <a href="index.html#window:status">status</a>
    </ul>


</dd>
</dl>
    <h2 class="section-header has-description"><a name="Events"></a>Events </h2>

          <div class="section-description">

<p> User scripts can subscribe Lua functions to certain events. Multiple functions
 can be associated with the same event. They will be called in the order they were
 registered. The first function which returns a non `nil` value terminates event
 propagation. The remaining event handler will not be called.
<p> Keep in mind that the editor is blocked while the event handlers
 are being executed, avoid long running tasks.

          </div>
    <dl class="function">
    <dt>
    <a name = "events"></a>
    <strong>events</strong>
    </dt>
    <dd>
    Event names.


    <h3>Fields:</h3>
    <ul>
        <li><span class="parameter">FILE_CLOSE</span>
        see <a href="index.html#file_close">file_close</a>
        </li>
        <li><span class="parameter">FILE_OPEN</span>
        see <a href="index.html#file_open">file_open</a>
        </li>
        <li><span class="parameter">FILE_SAVE_POST</span>
        see <a href="index.html#file_save_post">file_save_post</a>
        </li>
        <li><span class="parameter">FILE_SAVE_PRE</span>
        see <a href="index.html#file_save_pre">file_save_pre</a>
        </li>
        <li><span class="parameter">INIT</span>
        see <a href="index.html#init">init</a>
        </li>
        <li><span class="parameter">INPUT</span>
        see <a href="index.html#input">input</a>
        </li>
        <li><span class="parameter">QUIT</span>
        see <a href="index.html#quit">quit</a>
        </li>
        <li><span class="parameter">START</span>
        see <a href="index.html#start">start</a>
        </li>
        <li><span class="parameter">WIN_CLOSE</span>
        see <a href="index.html#win_close">win_close</a>
        </li>
        <li><span class="parameter">WIN_HIGHLIGHT</span>
        see <a href="index.html#win_highlight">win_highlight</a>
        </li>
        <li><span class="parameter">WIN_OPEN</span>
        see <a href="index.html#win_open">win_open</a>
        </li>
        <li><span class="parameter">WIN_STATUS</span>
        see <a href="index.html#win_status">win_status</a>
        </li>
        <li><span class="parameter">TERM_CSI</span>
        see <a href="index.html#term_csi">term_csi</a>
        </li>
        <li><span class="parameter">PROCESS_RESPONSE</span>
        see <a href="index.html#process_response">process_response</a>
        </li>
        <li><span class="parameter">UI_DRAW</span>
        see <a href="index.html#ui_draw">ui_draw</a>
        </li>
    </ul>





</dd>
    <dt>
    <a name = "events.emit"></a>
    <strong>events.emit(event, ...)</strong>
    </dt>
    <dd>
    Generate event.
<p> Invokes all event handlers in the order they were registered.
 Passes all arguments to the handler. The first handler which returns a non `nil`
 value terminates the event propagation. The other handlers will not be called.



    <h3>Parameters:</h3>
    <ul>
        <li><span class="parameter">event</span>
            <span class="types"><a class="type" href="https://www.lua.org/manual/5.1/manual.html#5.4">string</a></span>
         the event name
        </li>
        <li><span class="parameter">...</span>
            <span class="types"><span class="type">...</span></span>
         the remaining parameters are passed on to the handler
        </li>
    </ul>





</dd>
    <dt>
    <a name = "events.subscribe"></a>
    <strong>events.subscribe(event, handler[, index])</strong>
    </dt>
    <dd>
    Subscribe to an event.
<p> Register an event handler.


    <h3>Parameters:</h3>
    <ul>
        <li><span class="parameter">event</span>
            <span class="types"><a class="type" href="https://www.lua.org/manual/5.1/manual.html#5.4">string</a></span>
         the event name
        </li>
        <li><span class="parameter">handler</span>
            <span class="types"><span class="type">function</span></span>
         the event handler
        </li>
        <li><span class="parameter">index</span>
            <span class="types"><span class="type">int</span></span>
         the index at which to insert the handler (1 is the highest priority)
         (<em>optional</em>)
        </li>
    </ul>




    <h3>Usage:</h3>
    <ul>
        <pre class="example">vis.events.<span class="function-name">subscribe</span>(vis.events.FILE_SAVE_PRE, <span class="keyword">function</span>(file, path)
	<span class="comment">-- do something useful
</span>	<span class="keyword">return</span> <span class="keyword">true</span>
<span class="keyword">end</span>)</pre>
    </ul>

</dd>
    <dt>
    <a name = "events.unsubscribe"></a>
    <strong>events.unsubscribe(event, handler)</strong>
    </dt>
    <dd>
    Unsubscribe from an event.
<p> Remove a registered event handler.


    <h3>Parameters:</h3>
    <ul>
        <li><span class="parameter">event</span>
            <span class="types"><a class="type" href="https://www.lua.org/manual/5.1/manual.html#5.4">string</a></span>
         the event name
        </li>
        <li><span class="parameter">handler</span>
            <span class="types"><span class="type">function</span></span>
         the event handler to unsubscribe
        </li>
    </ul>

    <h3>Returns:</h3>
    <ol>

           <span class="types"><span class="type">bool</span></span>
        whether the handler was successfully removed
    </ol>




</dd>
</dl>


</div> <!-- id="content" -->
</div> <!-- id="main" -->
<div id="about">
<i>generated by <a href="http://github.com/lunarmodules/LDoc">LDoc 1.5.0</a></i>
<i style="float:right;">Last updated 2025-12-22 16:15:54 </i>
</div> <!-- id="about" -->
</div> <!-- id="container" -->
</body>
</html>
